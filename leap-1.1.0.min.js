/*!                                                              
 * LeapJS v1.1.0                                                  
 * http://github.com/leapmotion/leapjs/                                        
 *                                                                             
 * Copyright 2013 LeapMotion, Inc. and other contributors                      
 * Released under the Apache-2.0 license                                       
 * http://github.com/leapmotion/leapjs/blob/master/LICENSE                     
 */
!function i(a,s,u){function c(n,t){if(!s[n]){if(!a[n]){var e="function"==typeof require&&require;if(!t&&e)return e(n,!0);if(l)return l(n,!0);var r=new Error("Cannot find module '"+n+"'");throw r.code="MODULE_NOT_FOUND",r}var o=s[n]={exports:{}};a[n][0].call(o.exports,function(t){return c(a[n][1][t]||t)},o,o.exports,i,a,s,u)}return s[n].exports}for(var l="function"==typeof require&&require,t=0;t<u.length;t++)c(u[t]);return c}({1:[function(t,n,e){t("./pointable");var r=t("gl-matrix"),o=r.vec3,i=r.mat3,a=r.mat4,s=(t("underscore"),n.exports=function(t,n){this.finger=t,this._center=null,this._matrix=null,this.type=n.type,this.prevJoint=n.prevJoint,this.nextJoint=n.nextJoint,this.width=n.width;var e=new Array(3);o.sub(e,n.nextJoint,n.prevJoint),this.length=o.length(e),this.basis=n.basis});s.prototype.left=function(){return this._left||(this._left=i.determinant(this.basis[0].concat(this.basis[1]).concat(this.basis[2]))<0),this._left},s.prototype.matrix=function(){if(this._matrix)return this._matrix;var t=this.basis,n=this._matrix=a.create();return n[0]=t[0][0],n[1]=t[0][1],n[2]=t[0][2],n[4]=t[1][0],n[5]=t[1][1],n[6]=t[1][2],n[8]=t[2][0],n[9]=t[2][1],n[10]=t[2][2],n[3]=this.center()[0],n[7]=this.center()[1],n[11]=this.center()[2],this.left()&&(n[0]*=-1,n[1]*=-1,n[2]*=-1),this._matrix},s.prototype.lerp=function(t,n){o.lerp(t,this.prevJoint,this.nextJoint,n)},s.prototype.center=function(){if(this._center)return this._center;var t=o.create();return this.lerp(t,.5),this._center=t},s.prototype.direction=function(){return[-1*this.basis[2][0],-1*this.basis[2][1],-1*this.basis[2][2]]}},{"./pointable":15,"gl-matrix":23,underscore:34}],2:[function(t,n,e){var r=n.exports=function(t){this.pos=0,this._buf=[],this.size=t};r.prototype.get=function(t){if(null==t&&(t=0),!(t>=this.size||t>=this._buf.length))return this._buf[(this.pos-t-1)%this.size]},r.prototype.push=function(t){return this._buf[this.pos%this.size]=t,this.pos++}},{}],3:[function(t,n,e){var r=t("../protocol").chooseProtocol,o=t("events").EventEmitter,i=t("underscore"),a=n.exports=function(t){this.opts=i.defaults(t||{},{host:"127.0.0.1",enableGestures:!1,scheme:this.getScheme(),port:this.getPort(),background:!1,optimizeHMD:!1,requestProtocolVersion:a.defaultProtocolVersion}),this.host=this.opts.host,this.port=this.opts.port,this.scheme=this.opts.scheme,this.protocolVersionVerified=!1,this.background=null,this.optimizeHMD=null,this.on("ready",function(){this.enableGestures(this.opts.enableGestures),this.setBackground(this.opts.background),this.setOptimizeHMD(this.opts.optimizeHMD),this.opts.optimizeHMD?console.log("Optimized for head mounted display usage."):console.log("Optimized for desktop usage.")})};a.defaultProtocolVersion=6,a.prototype.getUrl=function(){return this.scheme+"//"+this.host+":"+this.port+"/v"+this.opts.requestProtocolVersion+".json"},a.prototype.getScheme=function(){return"ws:"},a.prototype.getPort=function(){return 6437},a.prototype.setBackground=function(t){this.opts.background=t,this.protocol&&this.protocol.sendBackground&&this.background!==this.opts.background&&(this.background=this.opts.background,this.protocol.sendBackground(this,this.opts.background))},a.prototype.setOptimizeHMD=function(t){this.opts.optimizeHMD=t,this.protocol&&this.protocol.sendOptimizeHMD&&this.optimizeHMD!==this.opts.optimizeHMD&&(this.optimizeHMD=this.opts.optimizeHMD,this.protocol.sendOptimizeHMD(this,this.opts.optimizeHMD))},a.prototype.handleOpen=function(){this.connected||(this.connected=!0,this.emit("connect"))},a.prototype.enableGestures=function(t){this.gesturesEnabled=!!t,this.send(this.protocol.encode({enableGestures:this.gesturesEnabled}))},a.prototype.handleClose=function(t,n){this.connected&&(this.disconnect(),1001===t&&1<this.opts.requestProtocolVersion&&(this.protocolVersionVerified?this.protocolVersionVerified=!1:this.opts.requestProtocolVersion--),this.startReconnection())},a.prototype.startReconnection=function(){var t=this;this.reconnectionTimer||(this.reconnectionTimer=setInterval(function(){t.reconnect()},500))},a.prototype.stopReconnection=function(){this.reconnectionTimer=clearInterval(this.reconnectionTimer)},a.prototype.disconnect=function(t){if(t||this.stopReconnection(),this.socket)return this.socket.close(),delete this.socket,delete this.protocol,delete this.background,delete this.optimizeHMD,delete this.focusedState,this.connected&&(this.connected=!1,this.emit("disconnect")),!0},a.prototype.reconnect=function(){this.connected?this.stopReconnection():(this.disconnect(!0),this.connect())},a.prototype.handleData=function(t){var n,e=JSON.parse(t);void 0===this.protocol?(n=this.protocol=r(e),this.protocolVersionVerified=!0,this.emit("ready")):n=this.protocol(e),this.emit(n.type,n)},a.prototype.connect=function(){if(!this.socket)return this.socket=this.setupSocket(),!0},a.prototype.send=function(t){this.socket.send(t)},a.prototype.reportFocus=function(t){this.connected&&this.focusedState!==t&&(this.focusedState=t,this.emit(this.focusedState?"focus":"blur"),this.protocol&&this.protocol.sendFocused&&this.protocol.sendFocused(this,this.focusedState))},i.extend(a.prototype,o.prototype)},{"../protocol":16,events:21,underscore:34}],4:[function(t,n,e){var r=n.exports=t("./base"),o=t("underscore"),i=n.exports=function(t){r.call(this,t);var n=this;this.on("ready",function(){n.startFocusLoop()}),this.on("disconnect",function(){n.stopFocusLoop()})};o.extend(i.prototype,r.prototype),i.__proto__=r,i.prototype.useSecure=function(){return"https:"===location.protocol},i.prototype.getScheme=function(){return this.useSecure()?"wss:":"ws:"},i.prototype.getPort=function(){return this.useSecure()?6436:6437},i.prototype.setupSocket=function(){var n=this,t=new WebSocket(this.getUrl());return t.onopen=function(){n.handleOpen()},t.onclose=function(t){n.handleClose(t.code,t.reason)},t.onmessage=function(t){n.handleData(t.data)},t.onerror=function(t){n.useSecure()&&"wss:"===n.scheme&&(n.scheme="ws:",n.port=6437,n.disconnect(),n.connect())},t},i.prototype.startFocusLoop=function(){if(!this.focusDetectorTimer){var n=this,e=null;e=void 0!==document.hidden?"hidden":void 0!==document.mozHidden?"mozHidden":void 0!==document.msHidden?"msHidden":void 0!==document.webkitHidden?"webkitHidden":void 0,void 0===n.windowVisible&&(n.windowVisible=void 0===e||!1===document[e]);var t=window.addEventListener("focus",function(t){n.windowVisible=!0,o()}),r=window.addEventListener("blur",function(t){n.windowVisible=!1,o()});this.on("disconnect",function(){window.removeEventListener("focus",t),window.removeEventListener("blur",r)});var o=function(){var t=void 0===e||!1===document[e];n.reportFocus(t&&n.windowVisible)};o(),this.focusDetectorTimer=setInterval(o,100)}},i.prototype.stopFocusLoop=function(){this.focusDetectorTimer&&(clearTimeout(this.focusDetectorTimer),delete this.focusDetectorTimer)}},{"./base":3,underscore:34}],5:[function(t,n,e){var r=t("ws"),o=t("./base"),i=t("underscore"),a=n.exports=function(t){o.call(this,t);var n=this;this.on("ready",function(){n.reportFocus(!0)})};i.extend(a.prototype,o.prototype),a.__proto__=o,a.prototype.setupSocket=function(){var e=this,t=new r(this.getUrl());return t.on("open",function(){e.handleOpen()}),t.on("message",function(t){e.handleData(t)}),t.on("close",function(t,n){e.handleClose(t,n)}),t.on("error",function(){e.startReconnection()}),t}},{"./base":3,underscore:34,ws:35}],6:[function(m,n,t){(function(r){var o=m("./frame"),i=m("./hand"),a=m("./pointable"),s=m("./finger"),u=m("./circular_buffer"),c=m("./pipeline"),t=m("events").EventEmitter,l=m("./gesture").gestureListener,f=m("./dialog"),h=m("underscore"),p=n.exports=function(t){var n=void 0!==r&&r.versions&&r.versions.node,e=this;t=h.defaults(t||{},{inNode:n}),this.inNode=t.inNode,t=h.defaults(t||{},{frameEventName:this.useAnimationLoop()?"animationFrame":"deviceFrame",suppressAnimationLoop:!this.useAnimationLoop(),loopWhileDisconnected:!0,useAllPlugins:!1,checkVersion:!0}),this.animationFrameRequested=!1,this.onAnimationFrame=function(t){e.lastConnectionFrame.valid&&e.emit("animationFrame",e.lastConnectionFrame),e.emit("frameEnd",t),e.loopWhileDisconnected&&(!1!==e.connection.focusedState||e.connection.opts.background)?window.requestAnimationFrame(e.onAnimationFrame):e.animationFrameRequested=!1},this.suppressAnimationLoop=t.suppressAnimationLoop,this.loopWhileDisconnected=t.loopWhileDisconnected,this.frameEventName=t.frameEventName,this.useAllPlugins=t.useAllPlugins,this.history=new u(200),this.lastFrame=o.Invalid,this.lastValidFrame=o.Invalid,this.lastConnectionFrame=o.Invalid,this.accumulatedGestures=[],this.checkVersion=t.checkVersion,void 0===t.connectionType?this.connectionType=this.inBrowser()?m("./connection/browser"):m("./connection/node"):this.connectionType=t.connectionType,this.connection=new this.connectionType(t),this.streamingCount=0,this.devices={},this.plugins={},this._pluginPipelineSteps={},this._pluginExtendedMethods={},t.useAllPlugins&&this.useRegisteredPlugins(),this.setupFrameEvents(t),this.setupConnectionEvents(),this.startAnimationLoop()};p.prototype.gesture=function(t,n){var e=l(this,t);return void 0!==n&&e.stop(n),e},p.prototype.setBackground=function(t){return this.connection.setBackground(t),this},p.prototype.setOptimizeHMD=function(t){return this.connection.setOptimizeHMD(t),this},p.prototype.inBrowser=function(){return!this.inNode},p.prototype.useAnimationLoop=function(){return this.inBrowser()&&!this.inBackgroundPage()},p.prototype.inBackgroundPage=function(){return"undefined"!=typeof chrome&&chrome.extension&&chrome.extension.getBackgroundPage&&chrome.extension.getBackgroundPage()===window},p.prototype.connect=function(){return this.connection.connect(),this},p.prototype.streaming=function(){return 0<this.streamingCount},p.prototype.connected=function(){return!!this.connection.connected},p.prototype.startAnimationLoop=function(){this.suppressAnimationLoop||this.animationFrameRequested||(this.animationFrameRequested=!0,window.requestAnimationFrame(this.onAnimationFrame))},p.prototype.disconnect=function(){return this.connection.disconnect(),this},p.prototype.frame=function(t){return this.history.get(t)||o.Invalid},p.prototype.loop=function(t){return t&&("function"==typeof t?this.on(this.frameEventName,t):this.setupFrameEvents(t)),this.connect()},p.prototype.addStep=function(t){this.pipeline||(this.pipeline=new c(this)),this.pipeline.addStep(t)},p.prototype.processFrame=function(t){t.gestures&&(this.accumulatedGestures=this.accumulatedGestures.concat(t.gestures)),this.lastConnectionFrame=t,this.startAnimationLoop(),this.emit("deviceFrame",t)},p.prototype.processFinishedFrame=function(t){if((this.lastFrame=t).valid&&(this.lastValidFrame=t),t.controller=this,t.historyIdx=this.history.push(t),t.gestures){t.gestures=this.accumulatedGestures,this.accumulatedGestures=[];for(var n=0;n!=t.gestures.length;n++)this.emit("gesture",t.gestures[n],t)}this.pipeline&&(t=(t=this.pipeline.run(t))||o.Invalid),this.emit("frame",t),this.emitHandEvents(t)},p.prototype.emitHandEvents=function(t){for(var n=0;n<t.hands.length;n++)this.emit("hand",t.hands[n])},p.prototype.setupFrameEvents=function(t){t.frame&&this.on("frame",t.frame),t.hand&&this.on("hand",t.hand)},p.prototype.setupConnectionEvents=function(){var i=this;this.connection.on("frame",function(t){i.processFrame(t)}),this.on(this.frameEventName,function(t){i.processFinishedFrame(t)});function n(){if(0<i.streamingCount){for(var t in i.devices)i.emit("deviceStopped",i.devices[t]),i.emit("deviceRemoved",i.devices[t]);for(var t in i.emit("streamingStopped",i.devices[t]),i.streamingCount=0,i.devices)delete i.devices[t]}}var e=function(){if(i.connection.opts.requestProtocolVersion<5&&0==i.streamingCount){i.streamingCount=1;var t={attached:!0,streaming:!0,type:"unknown",id:"Lx00000000000"};i.devices[t.id]=t,i.emit("deviceAttached",t),i.emit("deviceStreaming",t),i.emit("streamingStarted",t),i.connection.removeListener("frame",e)}};this.connection.on("focus",function(){i.loopWhileDisconnected&&i.startAnimationLoop(),i.emit("focus")}),this.connection.on("blur",function(){i.emit("blur")}),this.connection.on("protocol",function(t){t.on("beforeFrameCreated",function(t){i.emit("beforeFrameCreated",t)}),t.on("afterFrameCreated",function(t,n){i.emit("afterFrameCreated",t,n)}),i.emit("protocol",t)}),this.connection.on("ready",function(){i.checkVersion&&!i.inNode&&i.checkOutOfDate(),i.emit("ready")}),this.connection.on("connect",function(){i.emit("connect"),i.connection.removeListener("frame",e),i.connection.on("frame",e)}),this.connection.on("disconnect",function(){i.emit("disconnect"),n()}),this.connection.on("deviceConnect",function(t){t.state?(i.emit("deviceConnected"),i.connection.removeListener("frame",e),i.connection.on("frame",e)):(i.emit("deviceDisconnected"),n())}),this.connection.on("deviceEvent",function(t){var n=t.state,e=i.devices[n.id],r={};for(var o in n)e&&e.hasOwnProperty(o)&&e[o]==n[o]||(r[o]=!0);i.devices[n.id]=n,r.attached&&i.emit(n.attached?"deviceAttached":"deviceRemoved",n),r.streaming&&(n.streaming?(i.streamingCount++,i.emit("deviceStreaming",n),1==i.streamingCount&&i.emit("streamingStarted",n),r.attached||i.emit("deviceConnected")):r.attached&&n.attached||(i.streamingCount--,i.emit("deviceStopped",n),0==i.streamingCount&&i.emit("streamingStopped",n),i.emit("deviceDisconnected")))}),this.on("newListener",function(t,n){"deviceConnected"!=t&&"deviceDisconnected"!=t||console.warn(t+" events are depricated.  Consider using 'streamingStarted/streamingStopped' or 'deviceStreaming/deviceStopped' instead")})},p.prototype.checkOutOfDate=function(){console.assert(this.connection&&this.connection.protocol);var t=this.connection.protocol.serviceVersion,n=this.connection.protocol.version,e=this.connectionType.defaultProtocolVersion;return n<e&&(console.warn("Your Protocol Version is v"+n+", this app was designed for v"+e),f.warnOutOfDate({sV:t,pV:n}),!0)},p._pluginFactories={},p.plugin=function(t,n){return this._pluginFactories[t]&&console.warn('Plugin "'+t+'" already registered'),this._pluginFactories[t]=n},p.plugins=function(){return h.keys(this._pluginFactories)};function d(t,n,e){-1!=["beforeFrameCreated","afterFrameCreated"].indexOf(n)?this.on(n,e):(this.pipeline||(this.pipeline=new c(this)),this._pluginPipelineSteps[t]||(this._pluginPipelineSteps[t]=[]),this._pluginPipelineSteps[t].push(this.pipeline.addWrappedStep(n,e)))}function v(t,n,e){var r;switch(this._pluginExtendedMethods[t]||(this._pluginExtendedMethods[t]=[]),n){case"frame":r=o;break;case"hand":r=i;break;case"pointable":r=a,h.extend(s.prototype,e),h.extend(s.Invalid,e);break;case"finger":r=s;break;default:throw t+' specifies invalid object type "'+n+'" for prototypical extension'}h.extend(r.prototype,e),h.extend(r.Invalid,e),this._pluginExtendedMethods[t].push([r,e])}p.prototype.use=function(t,n){var e,r,o,i;if(!(r="function"==typeof t?t:p._pluginFactories[t]))throw"Leap Plugin "+t+" not found.";if(n=n||{},this.plugins[t])return h.extend(this.plugins[t],n),this;for(o in this.plugins[t]=n,i=r.call(this,n))"function"==typeof(e=i[o])?d.call(this,t,o,e):v.call(this,t,o,e);return this},p.prototype.stopUsing=function(t){var n,e=this._pluginPipelineSteps[t],r=this._pluginExtendedMethods[t],o=0;if(this.plugins[t]){if(e)for(o=0;o<e.length;o++)this.pipeline.removeStep(e[o]);if(r)for(o=0;o<r.length;o++)for(var i in n=r[o][0],r[o][1])delete n.prototype[i],delete n.Invalid[i];return delete this.plugins[t],this}},p.prototype.useRegisteredPlugins=function(){for(var t in p._pluginFactories)this.use(t)},h.extend(p.prototype,t.prototype)}).call(this,m("_process"))},{"./circular_buffer":2,"./connection/browser":4,"./connection/node":5,"./dialog":7,"./finger":8,"./frame":9,"./gesture":10,"./hand":11,"./pipeline":14,"./pointable":15,_process:33,events:21,underscore:34}],7:[function(t,n,e){(function(t){var o=n.exports=function(t,n){this.options=n||{},this.message=t,this.createElement()};o.prototype.createElement=function(){this.element=document.createElement("div"),this.element.className="leapjs-dialog",this.element.style.position="fixed",this.element.style.top="8px",this.element.style.left=0,this.element.style.right=0,this.element.style.textAlign="center",this.element.style.zIndex=1e3;var t=document.createElement("div");this.element.appendChild(t),t.style.className="leapjs-dialog",t.style.display="inline-block",t.style.margin="auto",t.style.padding="8px",t.style.color="#222",t.style.background="#eee",t.style.borderRadius="4px",t.style.border="1px solid #999",t.style.textAlign="left",t.style.cursor="pointer",t.style.whiteSpace="nowrap",t.style.transition="box-shadow 1s linear",t.innerHTML=this.message,this.options.onclick&&t.addEventListener("click",this.options.onclick),this.options.onmouseover&&t.addEventListener("mouseover",this.options.onmouseover),this.options.onmouseout&&t.addEventListener("mouseout",this.options.onmouseout),this.options.onmousemove&&t.addEventListener("mousemove",this.options.onmousemove)},o.prototype.show=function(){return document.body.appendChild(this.element),this},o.prototype.hide=function(){return document.body.removeChild(this.element),this},o.warnOutOfDate=function(t){t=t||{};var e="http://developer.leapmotion.com?";for(var n in t.returnTo=window.location.href,t)e+=n+"="+encodeURIComponent(t[n])+"&";var r;return(r=new o("This site requires Leap Motion Tracking V2.<button id='leapjs-accept-upgrade'  style='color: #444; transition: box-shadow 100ms linear; cursor: pointer; vertical-align: baseline; margin-left: 16px;'>Upgrade</button><button id='leapjs-decline-upgrade' style='color: #444; transition: box-shadow 100ms linear; cursor: pointer; vertical-align: baseline; margin-left: 8px; '>Not Now</button>",{onclick:function(t){if("leapjs-decline-upgrade"!=t.target.id){var n=window.open(e,"_blank","height=800,width=1000,location=1,menubar=1,resizable=1,status=1,toolbar=1,scrollbars=1");window.focus&&n.focus()}return r.hide(),!0},onmousemove:function(t){t.target==document.getElementById("leapjs-decline-upgrade")?(document.getElementById("leapjs-decline-upgrade").style.color="#000",document.getElementById("leapjs-decline-upgrade").style.boxShadow="0px 0px 2px #5daa00",document.getElementById("leapjs-accept-upgrade").style.color="#444",document.getElementById("leapjs-accept-upgrade").style.boxShadow="none"):(document.getElementById("leapjs-accept-upgrade").style.color="#000",document.getElementById("leapjs-accept-upgrade").style.boxShadow="0px 0px 2px #5daa00",document.getElementById("leapjs-decline-upgrade").style.color="#444",document.getElementById("leapjs-decline-upgrade").style.boxShadow="none")},onmouseout:function(){document.getElementById("leapjs-decline-upgrade").style.color="#444",document.getElementById("leapjs-decline-upgrade").style.boxShadow="none",document.getElementById("leapjs-accept-upgrade").style.color="#444",document.getElementById("leapjs-accept-upgrade").style.boxShadow="none"}})).show()},o.hasWarnedBones=!1,o.warnBones=function(){this.hasWarnedBones||(this.hasWarnedBones=!0,console.warn("Your Leap Service is out of date"),void 0!==t&&t.versions&&t.versions.node||this.warnOutOfDate({reason:"bones"}))}}).call(this,t("_process"))},{_process:33}],8:[function(t,n,e){var r=t("./pointable"),o=t("./bone"),i=t("./dialog"),a=t("underscore"),s=n.exports=function(t){r.call(this,t),this.dipPosition=t.dipPosition,this.pipPosition=t.pipPosition,this.mcpPosition=t.mcpPosition,this.carpPosition=t.carpPosition,this.extended=t.extended,this.type=t.type,this.finger=!0,this.positions=[this.carpPosition,this.mcpPosition,this.pipPosition,this.dipPosition,this.tipPosition],t.bases?this.addBones(t):i.warnBones()};a.extend(s.prototype,r.prototype),s.prototype.addBones=function(t){this.metacarpal=new o(this,{type:0,width:this.width,prevJoint:this.carpPosition,nextJoint:this.mcpPosition,basis:t.bases[0]}),this.proximal=new o(this,{type:1,width:this.width,prevJoint:this.mcpPosition,nextJoint:this.pipPosition,basis:t.bases[1]}),this.medial=new o(this,{type:2,width:this.width,prevJoint:this.pipPosition,nextJoint:this.dipPosition,basis:t.bases[2]}),this.distal=new o(this,{type:3,width:this.width,prevJoint:this.dipPosition,nextJoint:t.btipPosition,basis:t.bases[3]}),this.bones=[this.metacarpal,this.proximal,this.medial,this.distal]},s.prototype.toString=function(){return"Finger [ id:"+this.id+" "+this.length+"mmx | width:"+this.width+"mm | direction:"+this.direction+" ]"},s.Invalid={valid:!1}},{"./bone":1,"./dialog":7,"./pointable":15,underscore:34}],9:[function(t,n,e){var u=t("./hand"),c=t("./pointable"),r=t("./gesture").createGesture,o=t("gl-matrix"),i=o.mat3,a=o.vec3,s=t("./interaction_box"),l=t("./finger"),f=t("underscore"),h=n.exports=function(t){if(this.valid=!0,this.id=t.id,this.timestamp=t.timestamp,this.hands=[],this.handsMap={},this.pointables=[],this.tools=[],this.fingers=[],t.interactionBox&&(this.interactionBox=new s(t.interactionBox)),this.gestures=[],this.pointablesMap={},this._translation=t.t,this._rotation=f.flatten(t.r),this._scaleFactor=t.s,this.data=t,this.type="frame",this.currentFrameRate=t.currentFrameRate,t.gestures)for(var n=0,e=t.gestures.length;n!=e;n++)this.gestures.push(r(t.gestures[n]));this.postprocessData(t)};h.prototype.postprocessData=function(t){for(var n=0,e=(t=t||this.data).hands.length;n!=e;n++){var r=new u(t.hands[n]);(r.frame=this).hands.push(r),this.handsMap[r.id]=r}t.pointables=f.sortBy(t.pointables,function(t){return t.id});for(var o=0,i=t.pointables.length;o!=i;o++){var a=t.pointables[o],s=a.dipPosition?new l(a):new c(a);(s.frame=this).addPointable(s)}},h.prototype.addPointable=function(t){if(this.pointables.push(t),((this.pointablesMap[t.id]=t).tool?this.tools:this.fingers).push(t),void 0!==t.handId&&this.handsMap.hasOwnProperty(t.handId)){var n=this.handsMap[t.handId];switch(n.pointables.push(t),(t.tool?n.tools:n.fingers).push(t),t.type){case 0:n.thumb=t;break;case 1:n.indexFinger=t;break;case 2:n.middleFinger=t;break;case 3:n.ringFinger=t;break;case 4:n.pinky=t}}},h.prototype.tool=function(t){var n=this.pointable(t);return n.tool?n:c.Invalid},h.prototype.pointable=function(t){return this.pointablesMap[t]||c.Invalid},h.prototype.finger=function(t){var n=this.pointable(t);return n.tool?c.Invalid:n},h.prototype.hand=function(t){return this.handsMap[t]||u.Invalid},h.prototype.rotationAngle=function(t,n){if(!this.valid||!t.valid)return 0;var e=this.rotationMatrix(t),r=.5*(e[0]+e[4]+e[8]-1),o=Math.acos(r);if(o=isNaN(o)?0:o,void 0!==n){var i=this.rotationAxis(t);o*=a.dot(i,a.normalize(a.create(),n))}return o},h.prototype.rotationAxis=function(t){return this.valid&&t.valid?a.normalize(a.create(),[this._rotation[7]-t._rotation[5],this._rotation[2]-t._rotation[6],this._rotation[3]-t._rotation[1]]):a.create()},h.prototype.rotationMatrix=function(t){if(!this.valid||!t.valid)return i.create();var n=i.transpose(i.create(),this._rotation);return i.multiply(i.create(),t._rotation,n)},h.prototype.scaleFactor=function(t){return this.valid&&t.valid?Math.exp(this._scaleFactor-t._scaleFactor):1},h.prototype.translation=function(t){return this.valid&&t.valid?a.subtract(a.create(),this._translation,t._translation):a.create()},h.prototype.toString=function(){var t="Frame [ id:"+this.id+" | timestamp:"+this.timestamp+" | Hand count:("+this.hands.length+") | Pointable count:("+this.pointables.length+")";return this.gestures&&(t+=" | Gesture count:("+this.gestures.length+")"),t+=" ]"},h.prototype.dump=function(){var t="";t+="Frame Info:<br/>",t+=this.toString(),t+="<br/><br/>Hands:<br/>";for(var n=0,e=this.hands.length;n!=e;n++)t+="  "+this.hands[n].toString()+"<br/>";t+="<br/><br/>Pointables:<br/>";for(var r=0,o=this.pointables.length;r!=o;r++)t+="  "+this.pointables[r].toString()+"<br/>";if(this.gestures){t+="<br/><br/>Gestures:<br/>";for(var i=0,a=this.gestures.length;i!=a;i++)t+="  "+this.gestures[i].toString()+"<br/>"}return t+="<br/><br/>Raw JSON:<br/>",t+=JSON.stringify(this.data)},h.Invalid={valid:!1,hands:[],fingers:[],tools:[],gestures:[],pointables:[],pointable:function(){return c.Invalid},finger:function(){return c.Invalid},hand:function(){return u.Invalid},toString:function(){return"invalid frame"},dump:function(){return this.toString()},rotationAngle:function(){return 0},rotationMatrix:function(){return i.create()},rotationAxis:function(){return a.create()},scaleFactor:function(){return 1},translation:function(){return a.create()}}},{"./finger":8,"./gesture":10,"./hand":11,"./interaction_box":13,"./pointable":15,"gl-matrix":23,underscore:34}],10:[function(t,n,e){var r=t("gl-matrix").vec3,o=t("events").EventEmitter,a=t("underscore"),s=(e.createGesture=function(t){var n;switch(t.type){case"circle":n=new i(t);break;case"swipe":n=new u(t);break;case"screenTap":n=new c(t);break;case"keyTap":n=new l(t);break;default:throw"unknown gesture type"}return n.id=t.id,n.handIds=t.handIds.slice(),n.pointableIds=t.pointableIds.slice(),n.duration=t.duration,n.state=t.state,n.type=t.type,n},e.gestureListener=function(t,r){var o={},i={};t.on("gesture",function(t,n){if(t.type==r){if(("start"==t.state||"stop"==t.state)&&void 0===i[t.id]){var e=new s(t,n);i[t.id]=e,a.each(o,function(t,n){e.on(n,t)})}i[t.id].update(t,n),"stop"==t.state&&delete i[t.id]}});var n={start:function(t){return o.start=t,n},stop:function(t){return o.stop=t,n},complete:function(t){return o.stop=t,n},update:function(t){return o.update=t,n}};return n},e.Gesture=function(t,n){this.gestures=[t],this.frames=[n]});s.prototype.update=function(t,n){this.lastGesture=t,this.lastFrame=n,this.gestures.push(t),this.frames.push(n),this.emit(t.state,this)},s.prototype.translation=function(){return r.subtract(r.create(),this.lastGesture.startPosition,this.lastGesture.position)},a.extend(s.prototype,o.prototype);var i=function(t){this.center=t.center,this.normal=t.normal,this.progress=t.progress,this.radius=t.radius};i.prototype.toString=function(){return"CircleGesture ["+JSON.stringify(this)+"]"};var u=function(t){this.startPosition=t.startPosition,this.position=t.position,this.direction=t.direction,this.speed=t.speed};u.prototype.toString=function(){return"SwipeGesture ["+JSON.stringify(this)+"]"};var c=function(t){this.position=t.position,this.direction=t.direction,this.progress=t.progress};c.prototype.toString=function(){return"ScreenTapGesture ["+JSON.stringify(this)+"]"};var l=function(t){this.position=t.position,this.direction=t.direction,this.progress=t.progress};l.prototype.toString=function(){return"KeyTapGesture ["+JSON.stringify(this)+"]"}},{events:21,"gl-matrix":23,underscore:34}],11:[function(t,n,e){var r=t("./pointable"),o=t("./bone"),i=t("gl-matrix"),a=i.mat3,s=i.vec3,u=t("underscore"),c=n.exports=function(t){this.id=t.id,this.palmPosition=t.palmPosition,this.direction=t.direction,this.palmVelocity=t.palmVelocity,this.palmNormal=t.palmNormal,this.sphereCenter=t.sphereCenter,this.sphereRadius=t.sphereRadius,this.valid=!0,this.pointables=[],this.fingers=[],t.armBasis?this.arm=new o(this,{type:4,width:t.armWidth,prevJoint:t.elbow,nextJoint:t.wrist,basis:t.armBasis}):this.arm=null,this.tools=[],this._translation=t.t,this._rotation=u.flatten(t.r),this._scaleFactor=t.s,this.timeVisible=t.timeVisible,this.stabilizedPalmPosition=t.stabilizedPalmPosition,this.type=t.type,this.grabStrength=t.grabStrength,this.pinchStrength=t.pinchStrength,this.confidence=t.confidence};c.prototype.finger=function(t){var n=this.frame.finger(t);return n&&n.handId==this.id?n:r.Invalid},c.prototype.rotationAngle=function(t,n){if(!this.valid||!t.valid)return 0;if(!t.hand(this.id).valid)return 0;var e=this.rotationMatrix(t),r=.5*(e[0]+e[4]+e[8]-1),o=Math.acos(r);if(o=isNaN(o)?0:o,void 0!==n){var i=this.rotationAxis(t);o*=s.dot(i,s.normalize(s.create(),n))}return o},c.prototype.rotationAxis=function(t){if(!this.valid||!t.valid)return s.create();var n=t.hand(this.id);return n.valid?s.normalize(s.create(),[this._rotation[7]-n._rotation[5],this._rotation[2]-n._rotation[6],this._rotation[3]-n._rotation[1]]):s.create()},c.prototype.rotationMatrix=function(t){if(!this.valid||!t.valid)return a.create();var n=t.hand(this.id);if(!n.valid)return a.create();var e=a.transpose(a.create(),this._rotation);return a.multiply(a.create(),n._rotation,e)},c.prototype.scaleFactor=function(t){if(!this.valid||!t.valid)return 1;var n=t.hand(this.id);return n.valid?Math.exp(this._scaleFactor-n._scaleFactor):1},c.prototype.translation=function(t){if(!this.valid||!t.valid)return s.create();var n=t.hand(this.id);return n.valid?[this._translation[0]-n._translation[0],this._translation[1]-n._translation[1],this._translation[2]-n._translation[2]]:s.create()},c.prototype.toString=function(){return"Hand ("+this.type+") [ id: "+this.id+" | palm velocity:"+this.palmVelocity+" | sphere center:"+this.sphereCenter+" ] "},c.prototype.pitch=function(){return Math.atan2(this.direction[1],-this.direction[2])},c.prototype.yaw=function(){return Math.atan2(this.direction[0],-this.direction[2])},c.prototype.roll=function(){return Math.atan2(this.palmNormal[0],-this.palmNormal[1])},c.Invalid={valid:!1,fingers:[],tools:[],pointables:[],left:!1,pointable:function(){return r.Invalid},finger:function(){return r.Invalid},toString:function(){return"invalid frame"},dump:function(){return this.toString()},rotationAngle:function(){return 0},rotationMatrix:function(){return a.create()},rotationAxis:function(){return s.create()},scaleFactor:function(){return 1},translation:function(){return s.create()}}},{"./bone":1,"./pointable":15,"gl-matrix":23,underscore:34}],12:[function(t,n,e){n.exports={Controller:t("./controller"),Frame:t("./frame"),Gesture:t("./gesture"),Hand:t("./hand"),Pointable:t("./pointable"),Finger:t("./finger"),InteractionBox:t("./interaction_box"),CircularBuffer:t("./circular_buffer"),UI:t("./ui"),JSONProtocol:t("./protocol").JSONProtocol,glMatrix:t("gl-matrix"),mat3:t("gl-matrix").mat3,vec3:t("gl-matrix").vec3,loopController:void 0,version:t("./version.js"),_:t("underscore"),EventEmitter:t("events").EventEmitter,loop:function(t,n){return t&&void 0===n&&"[object Function]"==={}.toString.call(t)&&(n=t,t={}),this.loopController?t&&this.loopController.setupFrameEvents(t):this.loopController=new this.Controller(t),this.loopController.loop(n),this.loopController},plugin:function(t,n){this.Controller.plugin(t,n)}}},{"./circular_buffer":2,"./controller":6,"./finger":8,"./frame":9,"./gesture":10,"./hand":11,"./interaction_box":13,"./pointable":15,"./protocol":16,"./ui":17,"./version.js":20,events:21,"gl-matrix":23,underscore:34}],13:[function(t,n,e){var r=t("gl-matrix").vec3,o=n.exports=function(t){this.valid=!0,this.center=t.center,this.size=t.size,this.width=t.size[0],this.height=t.size[1],this.depth=t.size[2]};o.prototype.denormalizePoint=function(t){return r.fromValues((t[0]-.5)*this.size[0]+this.center[0],(t[1]-.5)*this.size[1]+this.center[1],(t[2]-.5)*this.size[2]+this.center[2])},o.prototype.normalizePoint=function(t,n){var e=r.fromValues((t[0]-this.center[0])/this.size[0]+.5,(t[1]-this.center[1])/this.size[1]+.5,(t[2]-this.center[2])/this.size[2]+.5);return n&&(e[0]=Math.min(Math.max(e[0],0),1),e[1]=Math.min(Math.max(e[1],0),1),e[2]=Math.min(Math.max(e[2],0),1)),e},o.prototype.toString=function(){return"InteractionBox [ width:"+this.width+" | height:"+this.height+" | depth:"+this.depth+" ]"},o.Invalid={valid:!1}},{"gl-matrix":23}],14:[function(t,n,e){var r=n.exports=function(t){this.steps=[],this.controller=t};r.prototype.addStep=function(t){this.steps.push(t)},r.prototype.run=function(t){for(var n=this.steps.length,e=0;e!=n&&t;e++)t=this.steps[e](t);return t},r.prototype.removeStep=function(t){var n=this.steps.indexOf(t);if(-1===n)throw"Step not found in pipeline";this.steps.splice(n,1)},r.prototype.addWrappedStep=function(o,i){function t(t){var n,e,r;for(e=0,r=(n="frame"==o?[t]:t[o+"s"]||[]).length;e<r;e++)i.call(a,n[e]);return t}var a=this.controller;return this.addStep(t),t}},{}],15:[function(t,n,e){t("gl-matrix").vec3;var r=n.exports=function(t){this.valid=!0,this.id=t.id,this.handId=t.handId,this.length=t.length,this.tool=t.tool,this.width=t.width,this.direction=t.direction,this.stabilizedTipPosition=t.stabilizedTipPosition,this.tipPosition=t.tipPosition,this.tipVelocity=t.tipVelocity,this.touchZone=t.touchZone,this.touchDistance=t.touchDistance,this.timeVisible=t.timeVisible};r.prototype.toString=function(){return"Pointable [ id:"+this.id+" "+this.length+"mmx | width:"+this.width+"mm | direction:"+this.direction+" ]"},r.prototype.hand=function(){return this.frame.hand(this.handId)},r.Invalid={valid:!1}},{"gl-matrix":23}],16:[function(t,n,e){function r(t){this.type=t.type,this.state=t.state}var o=t("./frame"),i=(t("./hand"),t("./pointable"),t("./finger"),t("underscore")),a=t("events").EventEmitter;e.chooseProtocol=function(t){var e;switch(t.version){case 1:case 2:case 3:case 4:case 5:case 6:(e=s(t)).sendBackground=function(t,n){t.send(e.encode({background:n}))},e.sendFocused=function(t,n){t.send(e.encode({focused:n}))},e.sendOptimizeHMD=function(t,n){t.send(e.encode({optimizeHMD:n}))};break;default:throw"unrecognized version"}return e};var s=e.JSONProtocol=function(t){var e=function(t){if(t.event)return new r(t.event);e.emit("beforeFrameCreated",t);var n=new o(t);return e.emit("afterFrameCreated",n,t),n};return e.encode=function(t){return JSON.stringify(t)},e.version=t.version,e.serviceVersion=t.serviceVersion,e.versionLong="Version "+t.version,e.type="protocol",i.extend(e,a.prototype),e}},{"./finger":8,"./frame":9,"./hand":11,"./pointable":15,events:21,underscore:34}],17:[function(t,n,e){e.UI={Region:t("./ui/region"),Cursor:t("./ui/cursor")}},{"./ui/cursor":18,"./ui/region":19}],18:[function(t,n,e){n.exports=function(){return function(t){var n=t.pointables.sort(function(t,n){return t.z-n.z})[0];return n&&n.valid&&(t.cursorPosition=n.tipPosition),t}}},{}],19:[function(t,n,e){var r=t("events").EventEmitter,o=t("underscore"),i=n.exports=function(t,n){this.start=new Vector(t),this.end=new Vector(n),this.enteredFrame=null};i.prototype.hasPointables=function(t){for(var n=0;n!=t.pointables.length;n++){var e=t.pointables[n].tipPosition;if(e.x>=this.start.x&&e.x<=this.end.x&&e.y>=this.start.y&&e.y<=this.end.y&&e.z>=this.start.z&&e.z<=this.end.z)return!0}return!1},i.prototype.listener=function(t){var n=this;return t&&t.nearThreshold&&this.setupNearRegion(t.nearThreshold),function(t){return n.updatePosition(t)}},i.prototype.clipper=function(){var n=this;return function(t){return n.updatePosition(t),n.enteredFrame?t:null}},i.prototype.setupNearRegion=function(t){var n=this.nearRegion=new i([this.start.x-t,this.start.y-t,this.start.z-t],[this.end.x+t,this.end.y+t,this.end.z+t]),e=this;n.on("enter",function(t){e.emit("near",t)}),n.on("exit",function(t){e.emit("far",t)}),e.on("exit",function(t){e.emit("near",t)})},i.prototype.updatePosition=function(t){return this.nearRegion&&this.nearRegion.updatePosition(t),this.hasPointables(t)&&null==this.enteredFrame?(this.enteredFrame=t,this.emit("enter",this.enteredFrame)):this.hasPointables(t)||null==this.enteredFrame||(this.enteredFrame=null,this.emit("exit",this.enteredFrame)),t},i.prototype.normalize=function(t){return new Vector([(t.x-this.start.x)/(this.end.x-this.start.x),(t.y-this.start.y)/(this.end.y-this.start.y),(t.z-this.start.z)/(this.end.z-this.start.z)])},i.prototype.mapToXY=function(t,n,e){var r=this.normalize(t),o=r.x,i=r.y;return 1<o?o=1:o<-1&&(o=-1),1<i?i=1:i<-1&&(i=-1),[(o+1)/2*n,(1-i)/2*e,r.z]},o.extend(i.prototype,r.prototype)},{events:21,underscore:34}],20:[function(t,n,e){n.exports={full:"1.1.0",major:1,minor:1,dot:0}},{}],21:[function(t,n,e){var u=Object.create||function(t){function n(){}return n.prototype=t,new n},a=Object.keys||function(t){var n=[];for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&n.push(e);return e},i=Function.prototype.bind||function(t){var n=this;return function(){return n.apply(t,arguments)}};function r(){this._events&&Object.prototype.hasOwnProperty.call(this,"_events")||(this._events=u(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0}((n.exports=r).EventEmitter=r).prototype._events=void 0,r.prototype._maxListeners=void 0;var o,s=10;try{var c={};Object.defineProperty&&Object.defineProperty(c,"x",{value:0}),o=0===c.x}catch(t){o=!1}function l(t){return void 0===t._maxListeners?r.defaultMaxListeners:t._maxListeners}function f(t,n,e,r){var o,i,a;if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');if((i=t._events)?(i.newListener&&(t.emit("newListener",n,e.listener?e.listener:e),i=t._events),a=i[n]):(i=t._events=u(null),t._eventsCount=0),a){if("function"==typeof a?a=i[n]=r?[e,a]:[a,e]:r?a.unshift(e):a.push(e),!a.warned&&(o=l(t))&&0<o&&a.length>o){a.warned=!0;var s=new Error("Possible EventEmitter memory leak detected. "+a.length+' "'+String(n)+'" listeners added. Use emitter.setMaxListeners() to increase limit.');s.name="MaxListenersExceededWarning",s.emitter=t,s.type=n,s.count=a.length,"object"==typeof console&&console.warn&&console.warn("%s: %s",s.name,s.message)}}else a=i[n]=e,++t._eventsCount;return t}function h(){if(!this.fired)switch(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:for(var t=new Array(arguments.length),n=0;n<t.length;++n)t[n]=arguments[n];this.listener.apply(this.target,t)}}function p(t,n,e){var r={fired:!1,wrapFn:void 0,target:t,type:n,listener:e},o=i.call(h,r);return o.listener=e,r.wrapFn=o}function d(t,n,e){var r=t._events;if(!r)return[];var o=r[n];return o?"function"==typeof o?e?[o.listener||o]:[o]:e?function(t){for(var n=new Array(t.length),e=0;e<n.length;++e)n[e]=t[e].listener||t[e];return n}(o):m(o,o.length):[]}function v(t){var n=this._events;if(n){var e=n[t];if("function"==typeof e)return 1;if(e)return e.length}return 0}function m(t,n){for(var e=new Array(n),r=0;r<n;++r)e[r]=t[r];return e}o?Object.defineProperty(r,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(t){if("number"!=typeof t||t<0||t!=t)throw new TypeError('"defaultMaxListeners" must be a positive number');s=t}}):r.defaultMaxListeners=s,r.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||isNaN(t))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=t,this},r.prototype.getMaxListeners=function(){return l(this)},r.prototype.emit=function(t,n,e,r){var o,i,a,s,u,c,l="error"===t;if(c=this._events)l=l&&null==c.error;else if(!l)return!1;if(l){if(1<arguments.length&&(o=n),o instanceof Error)throw o;var f=new Error('Unhandled "error" event. ('+o+")");throw f.context=o,f}if(!(i=c[t]))return!1;var h="function"==typeof i;switch(a=arguments.length){case 1:!function(t,n,e){if(n)t.call(e);else for(var r=t.length,o=m(t,r),i=0;i<r;++i)o[i].call(e)}(i,h,this);break;case 2:!function(t,n,e,r){if(n)t.call(e,r);else for(var o=t.length,i=m(t,o),a=0;a<o;++a)i[a].call(e,r)}(i,h,this,n);break;case 3:!function(t,n,e,r,o){if(n)t.call(e,r,o);else for(var i=t.length,a=m(t,i),s=0;s<i;++s)a[s].call(e,r,o)}(i,h,this,n,e);break;case 4:!function(t,n,e,r,o,i){if(n)t.call(e,r,o,i);else for(var a=t.length,s=m(t,a),u=0;u<a;++u)s[u].call(e,r,o,i)}(i,h,this,n,e,r);break;default:for(s=new Array(a-1),u=1;u<a;u++)s[u-1]=arguments[u];!function(t,n,e,r){if(n)t.apply(e,r);else for(var o=t.length,i=m(t,o),a=0;a<o;++a)i[a].apply(e,r)}(i,h,this,s)}return!0},r.prototype.on=r.prototype.addListener=function(t,n){return f(this,t,n,!1)},r.prototype.prependListener=function(t,n){return f(this,t,n,!0)},r.prototype.once=function(t,n){if("function"!=typeof n)throw new TypeError('"listener" argument must be a function');return this.on(t,p(this,t,n)),this},r.prototype.prependOnceListener=function(t,n){if("function"!=typeof n)throw new TypeError('"listener" argument must be a function');return this.prependListener(t,p(this,t,n)),this},r.prototype.removeListener=function(t,n){var e,r,o,i,a;if("function"!=typeof n)throw new TypeError('"listener" argument must be a function');if(!(r=this._events))return this;if(!(e=r[t]))return this;if(e===n||e.listener===n)0==--this._eventsCount?this._events=u(null):(delete r[t],r.removeListener&&this.emit("removeListener",t,e.listener||n));else if("function"!=typeof e){for(o=-1,i=e.length-1;0<=i;i--)if(e[i]===n||e[i].listener===n){a=e[i].listener,o=i;break}if(o<0)return this;0===o?e.shift():function(t,n){for(var e=n,r=e+1,o=t.length;r<o;e+=1,r+=1)t[e]=t[r];t.pop()}(e,o),1===e.length&&(r[t]=e[0]),r.removeListener&&this.emit("removeListener",t,a||n)}return this},r.prototype.removeAllListeners=function(t){var n,e,r;if(!(e=this._events))return this;if(!e.removeListener)return 0===arguments.length?(this._events=u(null),this._eventsCount=0):e[t]&&(0==--this._eventsCount?this._events=u(null):delete e[t]),this;if(0===arguments.length){var o,i=a(e);for(r=0;r<i.length;++r)"removeListener"!==(o=i[r])&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=u(null),this._eventsCount=0,this}if("function"==typeof(n=e[t]))this.removeListener(t,n);else if(n)for(r=n.length-1;0<=r;r--)this.removeListener(t,n[r]);return this},r.prototype.listeners=function(t){return d(this,t,!0)},r.prototype.rawListeners=function(t){return d(this,t,!1)},r.listenerCount=function(t,n){return"function"==typeof t.listenerCount?t.listenerCount(n):v.call(t,n)},r.prototype.listenerCount=v,r.prototype.eventNames=function(){return 0<this._eventsCount?Reflect.ownKeys(this._events):[]}},{}],22:[function(t,n,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.setMatrixArrayType=function(t){e.ARRAY_TYPE=o=t},e.toRadian=function(t){return t*a},e.equals=function(t,n){return Math.abs(t-n)<=r*Math.max(1,Math.abs(t),Math.abs(n))},e.RANDOM=e.ARRAY_TYPE=e.EPSILON=void 0;var r=1e-6;e.EPSILON=r;var o="undefined"!=typeof Float32Array?Float32Array:Array;e.ARRAY_TYPE=o;var i=Math.random;e.RANDOM=i;var a=Math.PI/180;Math.hypot||(Math.hypot=function(){for(var t=0,n=arguments.length;n--;)t+=arguments[n]*arguments[n];return Math.sqrt(t)})},{}],23:[function(t,n,e){"use strict";function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.vec4=e.vec3=e.vec2=e.quat2=e.quat=e.mat4=e.mat3=e.mat2d=e.mat2=e.glMatrix=void 0;var r=v(t("./common.js"));e.glMatrix=r;var o=v(t("./mat2.js"));e.mat2=o;var i=v(t("./mat2d.js"));e.mat2d=i;var s=v(t("./mat3.js"));e.mat3=s;var u=v(t("./mat4.js"));e.mat4=u;var c=v(t("./quat.js"));e.quat=c;var l=v(t("./quat2.js"));e.quat2=l;var f=v(t("./vec2.js"));e.vec2=f;var h=v(t("./vec3.js"));e.vec3=h;var p=v(t("./vec4.js"));function d(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return d=function(){return t},t}function v(t){if(t&&t.__esModule)return t;if(null===t||"object"!==a(t)&&"function"!=typeof t)return{default:t};var n=d();if(n&&n.has(t))return n.get(t);var e={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var i=r?Object.getOwnPropertyDescriptor(t,o):null;i&&(i.get||i.set)?Object.defineProperty(e,o,i):e[o]=t[o]}return e.default=t,n&&n.set(t,e),e}e.vec4=p},{"./common.js":22,"./mat2.js":24,"./mat2d.js":25,"./mat3.js":26,"./mat4.js":27,"./quat.js":28,"./quat2.js":29,"./vec2.js":30,"./vec3.js":31,"./vec4.js":32}],24:[function(t,n,e){"use strict";function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.create=function(){var t=new l.ARRAY_TYPE(4);l.ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0);return t[0]=1,t[3]=1,t},e.clone=function(t){var n=new l.ARRAY_TYPE(4);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n},e.copy=function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t},e.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},e.fromValues=function(t,n,e,r){var o=new l.ARRAY_TYPE(4);return o[0]=t,o[1]=n,o[2]=e,o[3]=r,o},e.set=function(t,n,e,r,o){return t[0]=n,t[1]=e,t[2]=r,t[3]=o,t},e.transpose=function(t,n){if(t===n){var e=n[1];t[1]=n[2],t[2]=e}else t[0]=n[0],t[1]=n[2],t[2]=n[1],t[3]=n[3];return t},e.invert=function(t,n){var e=n[0],r=n[1],o=n[2],i=n[3],a=e*i-o*r;return a?(a=1/a,t[0]=i*a,t[1]=-r*a,t[2]=-o*a,t[3]=e*a,t):null},e.adjoint=function(t,n){var e=n[0];return t[0]=n[3],t[1]=-n[1],t[2]=-n[2],t[3]=e,t},e.determinant=function(t){return t[0]*t[3]-t[2]*t[1]},e.multiply=r,e.rotate=function(t,n,e){var r=n[0],o=n[1],i=n[2],a=n[3],s=Math.sin(e),u=Math.cos(e);return t[0]=r*u+i*s,t[1]=o*u+a*s,t[2]=r*-s+i*u,t[3]=o*-s+a*u,t},e.scale=function(t,n,e){var r=n[0],o=n[1],i=n[2],a=n[3],s=e[0],u=e[1];return t[0]=r*s,t[1]=o*s,t[2]=i*u,t[3]=a*u,t},e.fromRotation=function(t,n){var e=Math.sin(n),r=Math.cos(n);return t[0]=r,t[1]=e,t[2]=-e,t[3]=r,t},e.fromScaling=function(t,n){return t[0]=n[0],t[1]=0,t[2]=0,t[3]=n[1],t},e.str=function(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},e.frob=function(t){return Math.hypot(t[0],t[1],t[2],t[3])},e.LDU=function(t,n,e,r){return t[2]=r[2]/r[0],e[0]=r[0],e[1]=r[1],e[3]=r[3]-t[2]*e[1],[t,n,e]},e.add=function(t,n,e){return t[0]=n[0]+e[0],t[1]=n[1]+e[1],t[2]=n[2]+e[2],t[3]=n[3]+e[3],t},e.subtract=o,e.exactEquals=function(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]&&t[3]===n[3]},e.equals=function(t,n){var e=t[0],r=t[1],o=t[2],i=t[3],a=n[0],s=n[1],u=n[2],c=n[3];return Math.abs(e-a)<=l.EPSILON*Math.max(1,Math.abs(e),Math.abs(a))&&Math.abs(r-s)<=l.EPSILON*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(o-u)<=l.EPSILON*Math.max(1,Math.abs(o),Math.abs(u))&&Math.abs(i-c)<=l.EPSILON*Math.max(1,Math.abs(i),Math.abs(c))},e.multiplyScalar=function(t,n,e){return t[0]=n[0]*e,t[1]=n[1]*e,t[2]=n[2]*e,t[3]=n[3]*e,t},e.multiplyScalarAndAdd=function(t,n,e,r){return t[0]=n[0]+e[0]*r,t[1]=n[1]+e[1]*r,t[2]=n[2]+e[2]*r,t[3]=n[3]+e[3]*r,t},e.sub=e.mul=void 0;var l=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==a(t)&&"function"!=typeof t)return{default:t};var n=s();if(n&&n.has(t))return n.get(t);var e={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var i=r?Object.getOwnPropertyDescriptor(t,o):null;i&&(i.get||i.set)?Object.defineProperty(e,o,i):e[o]=t[o]}e.default=t,n&&n.set(t,e);return e}(t("./common.js"));function s(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return s=function(){return t},t}function r(t,n,e){var r=n[0],o=n[1],i=n[2],a=n[3],s=e[0],u=e[1],c=e[2],l=e[3];return t[0]=r*s+i*u,t[1]=o*s+a*u,t[2]=r*c+i*l,t[3]=o*c+a*l,t}function o(t,n,e){return t[0]=n[0]-e[0],t[1]=n[1]-e[1],t[2]=n[2]-e[2],t[3]=n[3]-e[3],t}var i=r;e.mul=i;var u=o;e.sub=u},{"./common.js":22}],25:[function(t,n,e){"use strict";function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.create=function(){var t=new d.ARRAY_TYPE(6);d.ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0,t[4]=0,t[5]=0);return t[0]=1,t[3]=1,t},e.clone=function(t){var n=new d.ARRAY_TYPE(6);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n},e.copy=function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t},e.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},e.fromValues=function(t,n,e,r,o,i){var a=new d.ARRAY_TYPE(6);return a[0]=t,a[1]=n,a[2]=e,a[3]=r,a[4]=o,a[5]=i,a},e.set=function(t,n,e,r,o,i,a){return t[0]=n,t[1]=e,t[2]=r,t[3]=o,t[4]=i,t[5]=a,t},e.invert=function(t,n){var e=n[0],r=n[1],o=n[2],i=n[3],a=n[4],s=n[5],u=e*i-r*o;return u?(u=1/u,t[0]=i*u,t[1]=-r*u,t[2]=-o*u,t[3]=e*u,t[4]=(o*s-i*a)*u,t[5]=(r*a-e*s)*u,t):null},e.determinant=function(t){return t[0]*t[3]-t[1]*t[2]},e.multiply=r,e.rotate=function(t,n,e){var r=n[0],o=n[1],i=n[2],a=n[3],s=n[4],u=n[5],c=Math.sin(e),l=Math.cos(e);return t[0]=r*l+i*c,t[1]=o*l+a*c,t[2]=r*-c+i*l,t[3]=o*-c+a*l,t[4]=s,t[5]=u,t},e.scale=function(t,n,e){var r=n[0],o=n[1],i=n[2],a=n[3],s=n[4],u=n[5],c=e[0],l=e[1];return t[0]=r*c,t[1]=o*c,t[2]=i*l,t[3]=a*l,t[4]=s,t[5]=u,t},e.translate=function(t,n,e){var r=n[0],o=n[1],i=n[2],a=n[3],s=n[4],u=n[5],c=e[0],l=e[1];return t[0]=r,t[1]=o,t[2]=i,t[3]=a,t[4]=r*c+i*l+s,t[5]=o*c+a*l+u,t},e.fromRotation=function(t,n){var e=Math.sin(n),r=Math.cos(n);return t[0]=r,t[1]=e,t[2]=-e,t[3]=r,t[4]=0,t[5]=0,t},e.fromScaling=function(t,n){return t[0]=n[0],t[1]=0,t[2]=0,t[3]=n[1],t[4]=0,t[5]=0,t},e.fromTranslation=function(t,n){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=n[0],t[5]=n[1],t},e.str=function(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"},e.frob=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],1)},e.add=function(t,n,e){return t[0]=n[0]+e[0],t[1]=n[1]+e[1],t[2]=n[2]+e[2],t[3]=n[3]+e[3],t[4]=n[4]+e[4],t[5]=n[5]+e[5],t},e.subtract=o,e.multiplyScalar=function(t,n,e){return t[0]=n[0]*e,t[1]=n[1]*e,t[2]=n[2]*e,t[3]=n[3]*e,t[4]=n[4]*e,t[5]=n[5]*e,t},e.multiplyScalarAndAdd=function(t,n,e,r){return t[0]=n[0]+e[0]*r,t[1]=n[1]+e[1]*r,t[2]=n[2]+e[2]*r,t[3]=n[3]+e[3]*r,t[4]=n[4]+e[4]*r,t[5]=n[5]+e[5]*r,t},e.exactEquals=function(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]&&t[3]===n[3]&&t[4]===n[4]&&t[5]===n[5]},e.equals=function(t,n){var e=t[0],r=t[1],o=t[2],i=t[3],a=t[4],s=t[5],u=n[0],c=n[1],l=n[2],f=n[3],h=n[4],p=n[5];return Math.abs(e-u)<=d.EPSILON*Math.max(1,Math.abs(e),Math.abs(u))&&Math.abs(r-c)<=d.EPSILON*Math.max(1,Math.abs(r),Math.abs(c))&&Math.abs(o-l)<=d.EPSILON*Math.max(1,Math.abs(o),Math.abs(l))&&Math.abs(i-f)<=d.EPSILON*Math.max(1,Math.abs(i),Math.abs(f))&&Math.abs(a-h)<=d.EPSILON*Math.max(1,Math.abs(a),Math.abs(h))&&Math.abs(s-p)<=d.EPSILON*Math.max(1,Math.abs(s),Math.abs(p))},e.sub=e.mul=void 0;var d=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==a(t)&&"function"!=typeof t)return{default:t};var n=s();if(n&&n.has(t))return n.get(t);var e={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var i=r?Object.getOwnPropertyDescriptor(t,o):null;i&&(i.get||i.set)?Object.defineProperty(e,o,i):e[o]=t[o]}e.default=t,n&&n.set(t,e);return e}(t("./common.js"));function s(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return s=function(){return t},t}function r(t,n,e){var r=n[0],o=n[1],i=n[2],a=n[3],s=n[4],u=n[5],c=e[0],l=e[1],f=e[2],h=e[3],p=e[4],d=e[5];return t[0]=r*c+i*l,t[1]=o*c+a*l,t[2]=r*f+i*h,t[3]=o*f+a*h,t[4]=r*p+i*d+s,t[5]=o*p+a*d+u,t}function o(t,n,e){return t[0]=n[0]-e[0],t[1]=n[1]-e[1],t[2]=n[2]-e[2],t[3]=n[3]-e[3],t[4]=n[4]-e[4],t[5]=n[5]-e[5],t}var i=r;e.mul=i;var u=o;e.sub=u},{"./common.js":22}],26:[function(t,n,e){"use strict";function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.create=function(){var t=new M.ARRAY_TYPE(9);M.ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0);return t[0]=1,t[4]=1,t[8]=1,t},e.fromMat4=function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[4],t[4]=n[5],t[5]=n[6],t[6]=n[8],t[7]=n[9],t[8]=n[10],t},e.clone=function(t){var n=new M.ARRAY_TYPE(9);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[8]=t[8],n},e.copy=function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t},e.fromValues=function(t,n,e,r,o,i,a,s,u){var c=new M.ARRAY_TYPE(9);return c[0]=t,c[1]=n,c[2]=e,c[3]=r,c[4]=o,c[5]=i,c[6]=a,c[7]=s,c[8]=u,c},e.set=function(t,n,e,r,o,i,a,s,u,c){return t[0]=n,t[1]=e,t[2]=r,t[3]=o,t[4]=i,t[5]=a,t[6]=s,t[7]=u,t[8]=c,t},e.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},e.transpose=function(t,n){if(t===n){var e=n[1],r=n[2],o=n[5];t[1]=n[3],t[2]=n[6],t[3]=e,t[5]=n[7],t[6]=r,t[7]=o}else t[0]=n[0],t[1]=n[3],t[2]=n[6],t[3]=n[1],t[4]=n[4],t[5]=n[7],t[6]=n[2],t[7]=n[5],t[8]=n[8];return t},e.invert=function(t,n){var e=n[0],r=n[1],o=n[2],i=n[3],a=n[4],s=n[5],u=n[6],c=n[7],l=n[8],f=l*a-s*c,h=-l*i+s*u,p=c*i-a*u,d=e*f+r*h+o*p;return d?(d=1/d,t[0]=f*d,t[1]=(-l*r+o*c)*d,t[2]=(s*r-o*a)*d,t[3]=h*d,t[4]=(l*e-o*u)*d,t[5]=(-s*e+o*i)*d,t[6]=p*d,t[7]=(-c*e+r*u)*d,t[8]=(a*e-r*i)*d,t):null},e.adjoint=function(t,n){var e=n[0],r=n[1],o=n[2],i=n[3],a=n[4],s=n[5],u=n[6],c=n[7],l=n[8];return t[0]=a*l-s*c,t[1]=o*c-r*l,t[2]=r*s-o*a,t[3]=s*u-i*l,t[4]=e*l-o*u,t[5]=o*i-e*s,t[6]=i*c-a*u,t[7]=r*u-e*c,t[8]=e*a-r*i,t},e.determinant=function(t){var n=t[0],e=t[1],r=t[2],o=t[3],i=t[4],a=t[5],s=t[6],u=t[7],c=t[8];return n*(c*i-a*u)+e*(-c*o+a*s)+r*(u*o-i*s)},e.multiply=r,e.translate=function(t,n,e){var r=n[0],o=n[1],i=n[2],a=n[3],s=n[4],u=n[5],c=n[6],l=n[7],f=n[8],h=e[0],p=e[1];return t[0]=r,t[1]=o,t[2]=i,t[3]=a,t[4]=s,t[5]=u,t[6]=h*r+p*a+c,t[7]=h*o+p*s+l,t[8]=h*i+p*u+f,t},e.rotate=function(t,n,e){var r=n[0],o=n[1],i=n[2],a=n[3],s=n[4],u=n[5],c=n[6],l=n[7],f=n[8],h=Math.sin(e),p=Math.cos(e);return t[0]=p*r+h*a,t[1]=p*o+h*s,t[2]=p*i+h*u,t[3]=p*a-h*r,t[4]=p*s-h*o,t[5]=p*u-h*i,t[6]=c,t[7]=l,t[8]=f,t},e.scale=function(t,n,e){var r=e[0],o=e[1];return t[0]=r*n[0],t[1]=r*n[1],t[2]=r*n[2],t[3]=o*n[3],t[4]=o*n[4],t[5]=o*n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t},e.fromTranslation=function(t,n){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=n[0],t[7]=n[1],t[8]=1,t},e.fromRotation=function(t,n){var e=Math.sin(n),r=Math.cos(n);return t[0]=r,t[1]=e,t[2]=0,t[3]=-e,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},e.fromScaling=function(t,n){return t[0]=n[0],t[1]=0,t[2]=0,t[3]=0,t[4]=n[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},e.fromMat2d=function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=0,t[3]=n[2],t[4]=n[3],t[5]=0,t[6]=n[4],t[7]=n[5],t[8]=1,t},e.fromQuat=function(t,n){var e=n[0],r=n[1],o=n[2],i=n[3],a=e+e,s=r+r,u=o+o,c=e*a,l=r*a,f=r*s,h=o*a,p=o*s,d=o*u,v=i*a,m=i*s,y=i*u;return t[0]=1-f-d,t[3]=l-y,t[6]=h+m,t[1]=l+y,t[4]=1-c-d,t[7]=p-v,t[2]=h-m,t[5]=p+v,t[8]=1-c-f,t},e.normalFromMat4=function(t,n){var e=n[0],r=n[1],o=n[2],i=n[3],a=n[4],s=n[5],u=n[6],c=n[7],l=n[8],f=n[9],h=n[10],p=n[11],d=n[12],v=n[13],m=n[14],y=n[15],b=e*s-r*a,g=e*u-o*a,M=e*c-i*a,w=r*u-o*s,x=r*c-i*s,P=o*c-i*u,_=l*v-f*d,S=l*m-h*d,O=l*y-p*d,E=f*m-h*v,A=f*y-p*v,j=h*y-p*m,L=b*j-g*A+M*E+w*O-x*S+P*_;return L?(L=1/L,t[0]=(s*j-u*A+c*E)*L,t[1]=(u*O-a*j-c*S)*L,t[2]=(a*A-s*O+c*_)*L,t[3]=(o*A-r*j-i*E)*L,t[4]=(e*j-o*O+i*S)*L,t[5]=(r*O-e*A-i*_)*L,t[6]=(v*P-m*x+y*w)*L,t[7]=(m*M-d*P-y*g)*L,t[8]=(d*x-v*M+y*b)*L,t):null},e.projection=function(t,n,e){return t[0]=2/n,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/e,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t},e.str=function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},e.frob=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])},e.add=function(t,n,e){return t[0]=n[0]+e[0],t[1]=n[1]+e[1],t[2]=n[2]+e[2],t[3]=n[3]+e[3],t[4]=n[4]+e[4],t[5]=n[5]+e[5],t[6]=n[6]+e[6],t[7]=n[7]+e[7],t[8]=n[8]+e[8],t},e.subtract=o,e.multiplyScalar=function(t,n,e){return t[0]=n[0]*e,t[1]=n[1]*e,t[2]=n[2]*e,t[3]=n[3]*e,t[4]=n[4]*e,t[5]=n[5]*e,t[6]=n[6]*e,t[7]=n[7]*e,t[8]=n[8]*e,t},e.multiplyScalarAndAdd=function(t,n,e,r){return t[0]=n[0]+e[0]*r,t[1]=n[1]+e[1]*r,t[2]=n[2]+e[2]*r,t[3]=n[3]+e[3]*r,t[4]=n[4]+e[4]*r,t[5]=n[5]+e[5]*r,t[6]=n[6]+e[6]*r,t[7]=n[7]+e[7]*r,t[8]=n[8]+e[8]*r,t},e.exactEquals=function(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]&&t[3]===n[3]&&t[4]===n[4]&&t[5]===n[5]&&t[6]===n[6]&&t[7]===n[7]&&t[8]===n[8]},e.equals=function(t,n){var e=t[0],r=t[1],o=t[2],i=t[3],a=t[4],s=t[5],u=t[6],c=t[7],l=t[8],f=n[0],h=n[1],p=n[2],d=n[3],v=n[4],m=n[5],y=n[6],b=n[7],g=n[8];return Math.abs(e-f)<=M.EPSILON*Math.max(1,Math.abs(e),Math.abs(f))&&Math.abs(r-h)<=M.EPSILON*Math.max(1,Math.abs(r),Math.abs(h))&&Math.abs(o-p)<=M.EPSILON*Math.max(1,Math.abs(o),Math.abs(p))&&Math.abs(i-d)<=M.EPSILON*Math.max(1,Math.abs(i),Math.abs(d))&&Math.abs(a-v)<=M.EPSILON*Math.max(1,Math.abs(a),Math.abs(v))&&Math.abs(s-m)<=M.EPSILON*Math.max(1,Math.abs(s),Math.abs(m))&&Math.abs(u-y)<=M.EPSILON*Math.max(1,Math.abs(u),Math.abs(y))&&Math.abs(c-b)<=M.EPSILON*Math.max(1,Math.abs(c),Math.abs(b))&&Math.abs(l-g)<=M.EPSILON*Math.max(1,Math.abs(l),Math.abs(g))},e.sub=e.mul=void 0;var M=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==a(t)&&"function"!=typeof t)return{default:t};var n=s();if(n&&n.has(t))return n.get(t);var e={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var i=r?Object.getOwnPropertyDescriptor(t,o):null;i&&(i.get||i.set)?Object.defineProperty(e,o,i):e[o]=t[o]}e.default=t,n&&n.set(t,e);return e}(t("./common.js"));function s(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return s=function(){return t},t}function r(t,n,e){var r=n[0],o=n[1],i=n[2],a=n[3],s=n[4],u=n[5],c=n[6],l=n[7],f=n[8],h=e[0],p=e[1],d=e[2],v=e[3],m=e[4],y=e[5],b=e[6],g=e[7],M=e[8];return t[0]=h*r+p*a+d*c,t[1]=h*o+p*s+d*l,t[2]=h*i+p*u+d*f,t[3]=v*r+m*a+y*c,t[4]=v*o+m*s+y*l,t[5]=v*i+m*u+y*f,t[6]=b*r+g*a+M*c,t[7]=b*o+g*s+M*l,t[8]=b*i+g*u+M*f,t}function o(t,n,e){return t[0]=n[0]-e[0],t[1]=n[1]-e[1],t[2]=n[2]-e[2],t[3]=n[3]-e[3],t[4]=n[4]-e[4],t[5]=n[5]-e[5],t[6]=n[6]-e[6],t[7]=n[7]-e[7],t[8]=n[8]-e[8],t}var i=r;e.mul=i;var u=o;e.sub=u},{"./common.js":22}],27:[function(t,n,e){"use strict";function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.create=function(){var t=new T.ARRAY_TYPE(16);T.ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0);return t[0]=1,t[5]=1,t[10]=1,t[15]=1,t},e.clone=function(t){var n=new T.ARRAY_TYPE(16);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[8]=t[8],n[9]=t[9],n[10]=t[10],n[11]=t[11],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15],n},e.copy=function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],t},e.fromValues=function(t,n,e,r,o,i,a,s,u,c,l,f,h,p,d,v){var m=new T.ARRAY_TYPE(16);return m[0]=t,m[1]=n,m[2]=e,m[3]=r,m[4]=o,m[5]=i,m[6]=a,m[7]=s,m[8]=u,m[9]=c,m[10]=l,m[11]=f,m[12]=h,m[13]=p,m[14]=d,m[15]=v,m},e.set=function(t,n,e,r,o,i,a,s,u,c,l,f,h,p,d,v,m){return t[0]=n,t[1]=e,t[2]=r,t[3]=o,t[4]=i,t[5]=a,t[6]=s,t[7]=u,t[8]=c,t[9]=l,t[10]=f,t[11]=h,t[12]=p,t[13]=d,t[14]=v,t[15]=m,t},e.identity=P,e.transpose=function(t,n){if(t===n){var e=n[1],r=n[2],o=n[3],i=n[6],a=n[7],s=n[11];t[1]=n[4],t[2]=n[8],t[3]=n[12],t[4]=e,t[6]=n[9],t[7]=n[13],t[8]=r,t[9]=i,t[11]=n[14],t[12]=o,t[13]=a,t[14]=s}else t[0]=n[0],t[1]=n[4],t[2]=n[8],t[3]=n[12],t[4]=n[1],t[5]=n[5],t[6]=n[9],t[7]=n[13],t[8]=n[2],t[9]=n[6],t[10]=n[10],t[11]=n[14],t[12]=n[3],t[13]=n[7],t[14]=n[11],t[15]=n[15];return t},e.invert=function(t,n){var e=n[0],r=n[1],o=n[2],i=n[3],a=n[4],s=n[5],u=n[6],c=n[7],l=n[8],f=n[9],h=n[10],p=n[11],d=n[12],v=n[13],m=n[14],y=n[15],b=e*s-r*a,g=e*u-o*a,M=e*c-i*a,w=r*u-o*s,x=r*c-i*s,P=o*c-i*u,_=l*v-f*d,S=l*m-h*d,O=l*y-p*d,E=f*m-h*v,A=f*y-p*v,j=h*y-p*m,L=b*j-g*A+M*E+w*O-x*S+P*_;return L?(L=1/L,t[0]=(s*j-u*A+c*E)*L,t[1]=(o*A-r*j-i*E)*L,t[2]=(v*P-m*x+y*w)*L,t[3]=(h*x-f*P-p*w)*L,t[4]=(u*O-a*j-c*S)*L,t[5]=(e*j-o*O+i*S)*L,t[6]=(m*M-d*P-y*g)*L,t[7]=(l*P-h*M+p*g)*L,t[8]=(a*A-s*O+c*_)*L,t[9]=(r*O-e*A-i*_)*L,t[10]=(d*x-v*M+y*b)*L,t[11]=(f*M-l*x-p*b)*L,t[12]=(s*S-a*E-u*_)*L,t[13]=(e*E-r*S+o*_)*L,t[14]=(v*g-d*w-m*b)*L,t[15]=(l*w-f*g+h*b)*L,t):null},e.adjoint=function(t,n){var e=n[0],r=n[1],o=n[2],i=n[3],a=n[4],s=n[5],u=n[6],c=n[7],l=n[8],f=n[9],h=n[10],p=n[11],d=n[12],v=n[13],m=n[14],y=n[15];return t[0]=s*(h*y-p*m)-f*(u*y-c*m)+v*(u*p-c*h),t[1]=-(r*(h*y-p*m)-f*(o*y-i*m)+v*(o*p-i*h)),t[2]=r*(u*y-c*m)-s*(o*y-i*m)+v*(o*c-i*u),t[3]=-(r*(u*p-c*h)-s*(o*p-i*h)+f*(o*c-i*u)),t[4]=-(a*(h*y-p*m)-l*(u*y-c*m)+d*(u*p-c*h)),t[5]=e*(h*y-p*m)-l*(o*y-i*m)+d*(o*p-i*h),t[6]=-(e*(u*y-c*m)-a*(o*y-i*m)+d*(o*c-i*u)),t[7]=e*(u*p-c*h)-a*(o*p-i*h)+l*(o*c-i*u),t[8]=a*(f*y-p*v)-l*(s*y-c*v)+d*(s*p-c*f),t[9]=-(e*(f*y-p*v)-l*(r*y-i*v)+d*(r*p-i*f)),t[10]=e*(s*y-c*v)-a*(r*y-i*v)+d*(r*c-i*s),t[11]=-(e*(s*p-c*f)-a*(r*p-i*f)+l*(r*c-i*s)),t[12]=-(a*(f*m-h*v)-l*(s*m-u*v)+d*(s*h-u*f)),t[13]=e*(f*m-h*v)-l*(r*m-o*v)+d*(r*h-o*f),t[14]=-(e*(s*m-u*v)-a*(r*m-o*v)+d*(r*u-o*s)),t[15]=e*(s*h-u*f)-a*(r*h-o*f)+l*(r*u-o*s),t},e.determinant=function(t){var n=t[0],e=t[1],r=t[2],o=t[3],i=t[4],a=t[5],s=t[6],u=t[7],c=t[8],l=t[9],f=t[10],h=t[11],p=t[12],d=t[13],v=t[14],m=t[15];return(n*a-e*i)*(f*m-h*v)-(n*s-r*i)*(l*m-h*d)+(n*u-o*i)*(l*v-f*d)+(e*s-r*a)*(c*m-h*p)-(e*u-o*a)*(c*v-f*p)+(r*u-o*s)*(c*d-l*p)},e.multiply=r,e.translate=function(t,n,e){var r,o,i,a,s,u,c,l,f,h,p,d,v=e[0],m=e[1],y=e[2];n===t?(t[12]=n[0]*v+n[4]*m+n[8]*y+n[12],t[13]=n[1]*v+n[5]*m+n[9]*y+n[13],t[14]=n[2]*v+n[6]*m+n[10]*y+n[14],t[15]=n[3]*v+n[7]*m+n[11]*y+n[15]):(r=n[0],o=n[1],i=n[2],a=n[3],s=n[4],u=n[5],c=n[6],l=n[7],f=n[8],h=n[9],p=n[10],d=n[11],t[0]=r,t[1]=o,t[2]=i,t[3]=a,t[4]=s,t[5]=u,t[6]=c,t[7]=l,t[8]=f,t[9]=h,t[10]=p,t[11]=d,t[12]=r*v+s*m+f*y+n[12],t[13]=o*v+u*m+h*y+n[13],t[14]=i*v+c*m+p*y+n[14],t[15]=a*v+l*m+d*y+n[15]);return t},e.scale=function(t,n,e){var r=e[0],o=e[1],i=e[2];return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=n[3]*r,t[4]=n[4]*o,t[5]=n[5]*o,t[6]=n[6]*o,t[7]=n[7]*o,t[8]=n[8]*i,t[9]=n[9]*i,t[10]=n[10]*i,t[11]=n[11]*i,t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],t},e.rotate=function(t,n,e,r){var o,i,a,s,u,c,l,f,h,p,d,v,m,y,b,g,M,w,x,P,_,S,O,E,A=r[0],j=r[1],L=r[2],R=Math.hypot(A,j,L);if(R<T.EPSILON)return null;A*=R=1/R,j*=R,L*=R,o=Math.sin(e),i=Math.cos(e),a=1-i,s=n[0],u=n[1],c=n[2],l=n[3],f=n[4],h=n[5],p=n[6],d=n[7],v=n[8],m=n[9],y=n[10],b=n[11],g=A*A*a+i,M=j*A*a+L*o,w=L*A*a-j*o,x=A*j*a-L*o,P=j*j*a+i,_=L*j*a+A*o,S=A*L*a+j*o,O=j*L*a-A*o,E=L*L*a+i,t[0]=s*g+f*M+v*w,t[1]=u*g+h*M+m*w,t[2]=c*g+p*M+y*w,t[3]=l*g+d*M+b*w,t[4]=s*x+f*P+v*_,t[5]=u*x+h*P+m*_,t[6]=c*x+p*P+y*_,t[7]=l*x+d*P+b*_,t[8]=s*S+f*O+v*E,t[9]=u*S+h*O+m*E,t[10]=c*S+p*O+y*E,t[11]=l*S+d*O+b*E,n!==t&&(t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]);return t},e.rotateX=function(t,n,e){var r=Math.sin(e),o=Math.cos(e),i=n[4],a=n[5],s=n[6],u=n[7],c=n[8],l=n[9],f=n[10],h=n[11];n!==t&&(t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]);return t[4]=i*o+c*r,t[5]=a*o+l*r,t[6]=s*o+f*r,t[7]=u*o+h*r,t[8]=c*o-i*r,t[9]=l*o-a*r,t[10]=f*o-s*r,t[11]=h*o-u*r,t},e.rotateY=function(t,n,e){var r=Math.sin(e),o=Math.cos(e),i=n[0],a=n[1],s=n[2],u=n[3],c=n[8],l=n[9],f=n[10],h=n[11];n!==t&&(t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]);return t[0]=i*o-c*r,t[1]=a*o-l*r,t[2]=s*o-f*r,t[3]=u*o-h*r,t[8]=i*r+c*o,t[9]=a*r+l*o,t[10]=s*r+f*o,t[11]=u*r+h*o,t},e.rotateZ=function(t,n,e){var r=Math.sin(e),o=Math.cos(e),i=n[0],a=n[1],s=n[2],u=n[3],c=n[4],l=n[5],f=n[6],h=n[7];n!==t&&(t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]);return t[0]=i*o+c*r,t[1]=a*o+l*r,t[2]=s*o+f*r,t[3]=u*o+h*r,t[4]=c*o-i*r,t[5]=l*o-a*r,t[6]=f*o-s*r,t[7]=h*o-u*r,t},e.fromTranslation=function(t,n){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t},e.fromScaling=function(t,n){return t[0]=n[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=n[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.fromRotation=function(t,n,e){var r,o,i,a=e[0],s=e[1],u=e[2],c=Math.hypot(a,s,u);if(c<T.EPSILON)return null;return a*=c=1/c,s*=c,u*=c,r=Math.sin(n),o=Math.cos(n),i=1-o,t[0]=a*a*i+o,t[1]=s*a*i+u*r,t[2]=u*a*i-s*r,t[3]=0,t[4]=a*s*i-u*r,t[5]=s*s*i+o,t[6]=u*s*i+a*r,t[7]=0,t[8]=a*u*i+s*r,t[9]=s*u*i-a*r,t[10]=u*u*i+o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.fromXRotation=function(t,n){var e=Math.sin(n),r=Math.cos(n);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=e,t[7]=0,t[8]=0,t[9]=-e,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.fromYRotation=function(t,n){var e=Math.sin(n),r=Math.cos(n);return t[0]=r,t[1]=0,t[2]=-e,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=e,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.fromZRotation=function(t,n){var e=Math.sin(n),r=Math.cos(n);return t[0]=r,t[1]=e,t[2]=0,t[3]=0,t[4]=-e,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.fromRotationTranslation=h,e.fromQuat2=function(t,n){var e=new T.ARRAY_TYPE(3),r=-n[0],o=-n[1],i=-n[2],a=n[3],s=n[4],u=n[5],c=n[6],l=n[7],f=r*r+o*o+i*i+a*a;0<f?(e[0]=2*(s*a+l*r+u*i-c*o)/f,e[1]=2*(u*a+l*o+c*r-s*i)/f,e[2]=2*(c*a+l*i+s*o-u*r)/f):(e[0]=2*(s*a+l*r+u*i-c*o),e[1]=2*(u*a+l*o+c*r-s*i),e[2]=2*(c*a+l*i+s*o-u*r));return h(t,n,e),t},e.getTranslation=function(t,n){return t[0]=n[12],t[1]=n[13],t[2]=n[14],t},e.getScaling=y,e.getRotation=function(t,n){var e=new T.ARRAY_TYPE(3);y(e,n);var r=1/e[0],o=1/e[1],i=1/e[2],a=n[0]*r,s=n[1]*o,u=n[2]*i,c=n[4]*r,l=n[5]*o,f=n[6]*i,h=n[8]*r,p=n[9]*o,d=n[10]*i,v=a+l+d,m=0;0<v?(m=2*Math.sqrt(1+v),t[3]=.25*m,t[0]=(f-p)/m,t[1]=(h-u)/m,t[2]=(s-c)/m):l<a&&d<a?(m=2*Math.sqrt(1+a-l-d),t[3]=(f-p)/m,t[0]=.25*m,t[1]=(s+c)/m,t[2]=(h+u)/m):d<l?(m=2*Math.sqrt(1+l-a-d),t[3]=(h-u)/m,t[0]=(s+c)/m,t[1]=.25*m,t[2]=(f+p)/m):(m=2*Math.sqrt(1+d-a-l),t[3]=(s-c)/m,t[0]=(h+u)/m,t[1]=(f+p)/m,t[2]=.25*m);return t},e.fromRotationTranslationScale=function(t,n,e,r){var o=n[0],i=n[1],a=n[2],s=n[3],u=o+o,c=i+i,l=a+a,f=o*u,h=o*c,p=o*l,d=i*c,v=i*l,m=a*l,y=s*u,b=s*c,g=s*l,M=r[0],w=r[1],x=r[2];return t[0]=(1-(d+m))*M,t[1]=(h+g)*M,t[2]=(p-b)*M,t[3]=0,t[4]=(h-g)*w,t[5]=(1-(f+m))*w,t[6]=(v+y)*w,t[7]=0,t[8]=(p+b)*x,t[9]=(v-y)*x,t[10]=(1-(f+d))*x,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t},e.fromRotationTranslationScaleOrigin=function(t,n,e,r,o){var i=n[0],a=n[1],s=n[2],u=n[3],c=i+i,l=a+a,f=s+s,h=i*c,p=i*l,d=i*f,v=a*l,m=a*f,y=s*f,b=u*c,g=u*l,M=u*f,w=r[0],x=r[1],P=r[2],_=o[0],S=o[1],O=o[2],E=(1-(v+y))*w,A=(p+M)*w,j=(d-g)*w,L=(p-M)*x,R=(1-(h+y))*x,I=(m+b)*x,N=(d+g)*P,T=(m-b)*P,F=(1-(h+v))*P;return t[0]=E,t[1]=A,t[2]=j,t[3]=0,t[4]=L,t[5]=R,t[6]=I,t[7]=0,t[8]=N,t[9]=T,t[10]=F,t[11]=0,t[12]=e[0]+_-(E*_+L*S+N*O),t[13]=e[1]+S-(A*_+R*S+T*O),t[14]=e[2]+O-(j*_+I*S+F*O),t[15]=1,t},e.fromQuat=function(t,n){var e=n[0],r=n[1],o=n[2],i=n[3],a=e+e,s=r+r,u=o+o,c=e*a,l=r*a,f=r*s,h=o*a,p=o*s,d=o*u,v=i*a,m=i*s,y=i*u;return t[0]=1-f-d,t[1]=l+y,t[2]=h-m,t[3]=0,t[4]=l-y,t[5]=1-c-d,t[6]=p+v,t[7]=0,t[8]=h+m,t[9]=p-v,t[10]=1-c-f,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.frustum=function(t,n,e,r,o,i,a){var s=1/(e-n),u=1/(o-r),c=1/(i-a);return t[0]=2*i*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*i*u,t[6]=0,t[7]=0,t[8]=(e+n)*s,t[9]=(o+r)*u,t[10]=(a+i)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=a*i*2*c,t[15]=0,t},e.perspective=function(t,n,e,r,o){var i,a=1/Math.tan(n/2);t[0]=a/e,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=o&&o!==1/0?(i=1/(r-o),t[10]=(o+r)*i,t[14]=2*o*r*i):(t[10]=-1,t[14]=-2*r);return t},e.perspectiveFromFieldOfView=function(t,n,e,r){var o=Math.tan(n.upDegrees*Math.PI/180),i=Math.tan(n.downDegrees*Math.PI/180),a=Math.tan(n.leftDegrees*Math.PI/180),s=Math.tan(n.rightDegrees*Math.PI/180),u=2/(a+s),c=2/(o+i);return t[0]=u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=c,t[6]=0,t[7]=0,t[8]=-(a-s)*u*.5,t[9]=(o-i)*c*.5,t[10]=r/(e-r),t[11]=-1,t[12]=0,t[13]=0,t[14]=r*e/(e-r),t[15]=0,t},e.ortho=function(t,n,e,r,o,i,a){var s=1/(n-e),u=1/(r-o),c=1/(i-a);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(n+e)*s,t[13]=(o+r)*u,t[14]=(a+i)*c,t[15]=1,t},e.lookAt=function(t,n,e,r){var o,i,a,s,u,c,l,f,h,p,d=n[0],v=n[1],m=n[2],y=r[0],b=r[1],g=r[2],M=e[0],w=e[1],x=e[2];if(Math.abs(d-M)<T.EPSILON&&Math.abs(v-w)<T.EPSILON&&Math.abs(m-x)<T.EPSILON)return P(t);l=d-M,f=v-w,h=m-x,p=1/Math.hypot(l,f,h),o=b*(h*=p)-g*(f*=p),i=g*(l*=p)-y*h,a=y*f-b*l,(p=Math.hypot(o,i,a))?(o*=p=1/p,i*=p,a*=p):a=i=o=0;s=f*a-h*i,u=h*o-l*a,c=l*i-f*o,(p=Math.hypot(s,u,c))?(s*=p=1/p,u*=p,c*=p):c=u=s=0;return t[0]=o,t[1]=s,t[2]=l,t[3]=0,t[4]=i,t[5]=u,t[6]=f,t[7]=0,t[8]=a,t[9]=c,t[10]=h,t[11]=0,t[12]=-(o*d+i*v+a*m),t[13]=-(s*d+u*v+c*m),t[14]=-(l*d+f*v+h*m),t[15]=1,t},e.targetTo=function(t,n,e,r){var o=n[0],i=n[1],a=n[2],s=r[0],u=r[1],c=r[2],l=o-e[0],f=i-e[1],h=a-e[2],p=l*l+f*f+h*h;0<p&&(p=1/Math.sqrt(p),l*=p,f*=p,h*=p);var d=u*h-c*f,v=c*l-s*h,m=s*f-u*l;0<(p=d*d+v*v+m*m)&&(p=1/Math.sqrt(p),d*=p,v*=p,m*=p);return t[0]=d,t[1]=v,t[2]=m,t[3]=0,t[4]=f*m-h*v,t[5]=h*d-l*m,t[6]=l*v-f*d,t[7]=0,t[8]=l,t[9]=f,t[10]=h,t[11]=0,t[12]=o,t[13]=i,t[14]=a,t[15]=1,t},e.str=function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},e.frob=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])},e.add=function(t,n,e){return t[0]=n[0]+e[0],t[1]=n[1]+e[1],t[2]=n[2]+e[2],t[3]=n[3]+e[3],t[4]=n[4]+e[4],t[5]=n[5]+e[5],t[6]=n[6]+e[6],t[7]=n[7]+e[7],t[8]=n[8]+e[8],t[9]=n[9]+e[9],t[10]=n[10]+e[10],t[11]=n[11]+e[11],t[12]=n[12]+e[12],t[13]=n[13]+e[13],t[14]=n[14]+e[14],t[15]=n[15]+e[15],t},e.subtract=o,e.multiplyScalar=function(t,n,e){return t[0]=n[0]*e,t[1]=n[1]*e,t[2]=n[2]*e,t[3]=n[3]*e,t[4]=n[4]*e,t[5]=n[5]*e,t[6]=n[6]*e,t[7]=n[7]*e,t[8]=n[8]*e,t[9]=n[9]*e,t[10]=n[10]*e,t[11]=n[11]*e,t[12]=n[12]*e,t[13]=n[13]*e,t[14]=n[14]*e,t[15]=n[15]*e,t},e.multiplyScalarAndAdd=function(t,n,e,r){return t[0]=n[0]+e[0]*r,t[1]=n[1]+e[1]*r,t[2]=n[2]+e[2]*r,t[3]=n[3]+e[3]*r,t[4]=n[4]+e[4]*r,t[5]=n[5]+e[5]*r,t[6]=n[6]+e[6]*r,t[7]=n[7]+e[7]*r,t[8]=n[8]+e[8]*r,t[9]=n[9]+e[9]*r,t[10]=n[10]+e[10]*r,t[11]=n[11]+e[11]*r,t[12]=n[12]+e[12]*r,t[13]=n[13]+e[13]*r,t[14]=n[14]+e[14]*r,t[15]=n[15]+e[15]*r,t},e.exactEquals=function(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]&&t[3]===n[3]&&t[4]===n[4]&&t[5]===n[5]&&t[6]===n[6]&&t[7]===n[7]&&t[8]===n[8]&&t[9]===n[9]&&t[10]===n[10]&&t[11]===n[11]&&t[12]===n[12]&&t[13]===n[13]&&t[14]===n[14]&&t[15]===n[15]},e.equals=function(t,n){var e=t[0],r=t[1],o=t[2],i=t[3],a=t[4],s=t[5],u=t[6],c=t[7],l=t[8],f=t[9],h=t[10],p=t[11],d=t[12],v=t[13],m=t[14],y=t[15],b=n[0],g=n[1],M=n[2],w=n[3],x=n[4],P=n[5],_=n[6],S=n[7],O=n[8],E=n[9],A=n[10],j=n[11],L=n[12],R=n[13],I=n[14],N=n[15];return Math.abs(e-b)<=T.EPSILON*Math.max(1,Math.abs(e),Math.abs(b))&&Math.abs(r-g)<=T.EPSILON*Math.max(1,Math.abs(r),Math.abs(g))&&Math.abs(o-M)<=T.EPSILON*Math.max(1,Math.abs(o),Math.abs(M))&&Math.abs(i-w)<=T.EPSILON*Math.max(1,Math.abs(i),Math.abs(w))&&Math.abs(a-x)<=T.EPSILON*Math.max(1,Math.abs(a),Math.abs(x))&&Math.abs(s-P)<=T.EPSILON*Math.max(1,Math.abs(s),Math.abs(P))&&Math.abs(u-_)<=T.EPSILON*Math.max(1,Math.abs(u),Math.abs(_))&&Math.abs(c-S)<=T.EPSILON*Math.max(1,Math.abs(c),Math.abs(S))&&Math.abs(l-O)<=T.EPSILON*Math.max(1,Math.abs(l),Math.abs(O))&&Math.abs(f-E)<=T.EPSILON*Math.max(1,Math.abs(f),Math.abs(E))&&Math.abs(h-A)<=T.EPSILON*Math.max(1,Math.abs(h),Math.abs(A))&&Math.abs(p-j)<=T.EPSILON*Math.max(1,Math.abs(p),Math.abs(j))&&Math.abs(d-L)<=T.EPSILON*Math.max(1,Math.abs(d),Math.abs(L))&&Math.abs(v-R)<=T.EPSILON*Math.max(1,Math.abs(v),Math.abs(R))&&Math.abs(m-I)<=T.EPSILON*Math.max(1,Math.abs(m),Math.abs(I))&&Math.abs(y-N)<=T.EPSILON*Math.max(1,Math.abs(y),Math.abs(N))},e.sub=e.mul=void 0;var T=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==a(t)&&"function"!=typeof t)return{default:t};var n=s();if(n&&n.has(t))return n.get(t);var e={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var i=r?Object.getOwnPropertyDescriptor(t,o):null;i&&(i.get||i.set)?Object.defineProperty(e,o,i):e[o]=t[o]}e.default=t,n&&n.set(t,e);return e}(t("./common.js"));function s(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return s=function(){return t},t}function P(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function r(t,n,e){var r=n[0],o=n[1],i=n[2],a=n[3],s=n[4],u=n[5],c=n[6],l=n[7],f=n[8],h=n[9],p=n[10],d=n[11],v=n[12],m=n[13],y=n[14],b=n[15],g=e[0],M=e[1],w=e[2],x=e[3];return t[0]=g*r+M*s+w*f+x*v,t[1]=g*o+M*u+w*h+x*m,t[2]=g*i+M*c+w*p+x*y,t[3]=g*a+M*l+w*d+x*b,g=e[4],M=e[5],w=e[6],x=e[7],t[4]=g*r+M*s+w*f+x*v,t[5]=g*o+M*u+w*h+x*m,t[6]=g*i+M*c+w*p+x*y,t[7]=g*a+M*l+w*d+x*b,g=e[8],M=e[9],w=e[10],x=e[11],t[8]=g*r+M*s+w*f+x*v,t[9]=g*o+M*u+w*h+x*m,t[10]=g*i+M*c+w*p+x*y,t[11]=g*a+M*l+w*d+x*b,g=e[12],M=e[13],w=e[14],x=e[15],t[12]=g*r+M*s+w*f+x*v,t[13]=g*o+M*u+w*h+x*m,t[14]=g*i+M*c+w*p+x*y,t[15]=g*a+M*l+w*d+x*b,t}function h(t,n,e){var r=n[0],o=n[1],i=n[2],a=n[3],s=r+r,u=o+o,c=i+i,l=r*s,f=r*u,h=r*c,p=o*u,d=o*c,v=i*c,m=a*s,y=a*u,b=a*c;return t[0]=1-(p+v),t[1]=f+b,t[2]=h-y,t[3]=0,t[4]=f-b,t[5]=1-(l+v),t[6]=d+m,t[7]=0,t[8]=h+y,t[9]=d-m,t[10]=1-(l+p),t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function y(t,n){var e=n[0],r=n[1],o=n[2],i=n[4],a=n[5],s=n[6],u=n[8],c=n[9],l=n[10];return t[0]=Math.hypot(e,r,o),t[1]=Math.hypot(i,a,s),t[2]=Math.hypot(u,c,l),t}function o(t,n,e){return t[0]=n[0]-e[0],t[1]=n[1]-e[1],t[2]=n[2]-e[2],t[3]=n[3]-e[3],t[4]=n[4]-e[4],t[5]=n[5]-e[5],t[6]=n[6]-e[6],t[7]=n[7]-e[7],t[8]=n[8]-e[8],t[9]=n[9]-e[9],t[10]=n[10]-e[10],t[11]=n[11]-e[11],t[12]=n[12]-e[12],t[13]=n[13]-e[13],t[14]=n[14]-e[14],t[15]=n[15]-e[15],t}var i=r;e.mul=i;var u=o;e.sub=u},{"./common.js":22}],28:[function(t,n,e){"use strict";function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.create=c,e.identity=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},e.setAxisAngle=l,e.getAxisAngle=function(t,n){var e=2*Math.acos(n[3]),r=Math.sin(e/2);r>y.EPSILON?(t[0]=n[0]/r,t[1]=n[1]/r,t[2]=n[2]/r):(t[0]=1,t[1]=0,t[2]=0);return e},e.getAngle=function(t,n){var e=_(t,n);return Math.acos(2*e*e-1)},e.multiply=f,e.rotateX=function(t,n,e){e*=.5;var r=n[0],o=n[1],i=n[2],a=n[3],s=Math.sin(e),u=Math.cos(e);return t[0]=r*u+a*s,t[1]=o*u+i*s,t[2]=i*u-o*s,t[3]=a*u-r*s,t},e.rotateY=function(t,n,e){e*=.5;var r=n[0],o=n[1],i=n[2],a=n[3],s=Math.sin(e),u=Math.cos(e);return t[0]=r*u-i*s,t[1]=o*u+a*s,t[2]=i*u+r*s,t[3]=a*u-o*s,t},e.rotateZ=function(t,n,e){e*=.5;var r=n[0],o=n[1],i=n[2],a=n[3],s=Math.sin(e),u=Math.cos(e);return t[0]=r*u+o*s,t[1]=o*u-r*s,t[2]=i*u+a*s,t[3]=a*u-i*s,t},e.calculateW=function(t,n){var e=n[0],r=n[1],o=n[2];return t[0]=e,t[1]=r,t[2]=o,t[3]=Math.sqrt(Math.abs(1-e*e-r*r-o*o)),t},e.exp=h,e.ln=p,e.pow=function(t,n,e){return p(t,n),P(t,t,e),h(t,t),t},e.slerp=d,e.random=function(t){var n=y.RANDOM(),e=y.RANDOM(),r=y.RANDOM(),o=Math.sqrt(1-n),i=Math.sqrt(n);return t[0]=o*Math.sin(2*Math.PI*e),t[1]=o*Math.cos(2*Math.PI*e),t[2]=i*Math.sin(2*Math.PI*r),t[3]=i*Math.cos(2*Math.PI*r),t},e.invert=function(t,n){var e=n[0],r=n[1],o=n[2],i=n[3],a=e*e+r*r+o*o+i*i,s=a?1/a:0;return t[0]=-e*s,t[1]=-r*s,t[2]=-o*s,t[3]=i*s,t},e.conjugate=function(t,n){return t[0]=-n[0],t[1]=-n[1],t[2]=-n[2],t[3]=n[3],t},e.fromMat3=v,e.fromEuler=function(t,n,e,r){var o=.5*Math.PI/180;n*=o,e*=o,r*=o;var i=Math.sin(n),a=Math.cos(n),s=Math.sin(e),u=Math.cos(e),c=Math.sin(r),l=Math.cos(r);return t[0]=i*u*l-a*s*c,t[1]=a*s*l+i*u*c,t[2]=a*u*c-i*s*l,t[3]=a*u*l+i*s*c,t},e.str=function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},e.setAxes=e.sqlerp=e.rotationTo=e.equals=e.exactEquals=e.normalize=e.sqrLen=e.squaredLength=e.len=e.length=e.lerp=e.dot=e.scale=e.mul=e.add=e.set=e.copy=e.fromValues=e.clone=void 0;var y=u(t("./common.js")),r=u(t("./mat3.js")),o=u(t("./vec3.js")),i=u(t("./vec4.js"));function s(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return s=function(){return t},t}function u(t){if(t&&t.__esModule)return t;if(null===t||"object"!==a(t)&&"function"!=typeof t)return{default:t};var n=s();if(n&&n.has(t))return n.get(t);var e={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var i=r?Object.getOwnPropertyDescriptor(t,o):null;i&&(i.get||i.set)?Object.defineProperty(e,o,i):e[o]=t[o]}return e.default=t,n&&n.set(t,e),e}function c(){var t=new y.ARRAY_TYPE(4);return y.ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function l(t,n,e){e*=.5;var r=Math.sin(e);return t[0]=r*n[0],t[1]=r*n[1],t[2]=r*n[2],t[3]=Math.cos(e),t}function f(t,n,e){var r=n[0],o=n[1],i=n[2],a=n[3],s=e[0],u=e[1],c=e[2],l=e[3];return t[0]=r*l+a*s+o*c-i*u,t[1]=o*l+a*u+i*s-r*c,t[2]=i*l+a*c+r*u-o*s,t[3]=a*l-r*s-o*u-i*c,t}function h(t,n){var e=n[0],r=n[1],o=n[2],i=n[3],a=Math.sqrt(e*e+r*r+o*o),s=Math.exp(i),u=0<a?s*Math.sin(a)/a:0;return t[0]=e*u,t[1]=r*u,t[2]=o*u,t[3]=s*Math.cos(a),t}function p(t,n){var e=n[0],r=n[1],o=n[2],i=n[3],a=Math.sqrt(e*e+r*r+o*o),s=0<a?Math.atan2(a,i)/a:0;return t[0]=e*s,t[1]=r*s,t[2]=o*s,t[3]=.5*Math.log(e*e+r*r+o*o+i*i),t}function d(t,n,e,r){var o,i,a,s,u,c=n[0],l=n[1],f=n[2],h=n[3],p=e[0],d=e[1],v=e[2],m=e[3];return(i=c*p+l*d+f*v+h*m)<0&&(i=-i,p=-p,d=-d,v=-v,m=-m),u=1-i>y.EPSILON?(o=Math.acos(i),a=Math.sin(o),s=Math.sin((1-r)*o)/a,Math.sin(r*o)/a):(s=1-r,r),t[0]=s*c+u*p,t[1]=s*l+u*d,t[2]=s*f+u*v,t[3]=s*h+u*m,t}function v(t,n){var e,r=n[0]+n[4]+n[8];if(0<r)e=Math.sqrt(r+1),t[3]=.5*e,e=.5/e,t[0]=(n[5]-n[7])*e,t[1]=(n[6]-n[2])*e,t[2]=(n[1]-n[3])*e;else{var o=0;n[4]>n[0]&&(o=1),n[8]>n[3*o+o]&&(o=2);var i=(o+1)%3,a=(o+2)%3;e=Math.sqrt(n[3*o+o]-n[3*i+i]-n[3*a+a]+1),t[o]=.5*e,e=.5/e,t[3]=(n[3*i+a]-n[3*a+i])*e,t[i]=(n[3*i+o]+n[3*o+i])*e,t[a]=(n[3*a+o]+n[3*o+a])*e}return t}var m=i.clone;e.clone=m;var b=i.fromValues;e.fromValues=b;var g=i.copy;e.copy=g;var M=i.set;e.set=M;var w=i.add;e.add=w;var x=f;e.mul=x;var P=i.scale;e.scale=P;var _=i.dot;e.dot=_;var S=i.lerp;e.lerp=S;var O=i.length,E=e.length=O;e.len=E;var A=i.squaredLength,j=e.squaredLength=A;e.sqrLen=j;var L=i.normalize;e.normalize=L;var R=i.exactEquals;e.exactEquals=R;var I=i.equals;e.equals=I;var N,T,F,q=(N=o.create(),T=o.fromValues(1,0,0),F=o.fromValues(0,1,0),function(t,n,e){var r=o.dot(n,e);return r<-.999999?(o.cross(N,T,n),o.len(N)<1e-6&&o.cross(N,F,n),o.normalize(N,N),l(t,N,Math.PI),t):.999999<r?(t[0]=0,t[1]=0,t[2]=0,t[3]=1,t):(o.cross(N,n,e),t[0]=N[0],t[1]=N[1],t[2]=N[2],t[3]=1+r,L(t,t))});e.rotationTo=q;var k,D,Y=(k=c(),D=c(),function(t,n,e,r,o,i){return d(k,n,o,i),d(D,e,r,i),d(t,k,D,2*i*(1-i)),t});e.sqlerp=Y;var z,V=(z=r.create(),function(t,n,e,r){return z[0]=e[0],z[3]=e[1],z[6]=e[2],z[1]=r[0],z[4]=r[1],z[7]=r[2],z[2]=-n[0],z[5]=-n[1],z[8]=-n[2],L(t,v(t,z))});e.setAxes=V},{"./common.js":22,"./mat3.js":26,"./vec3.js":31,"./vec4.js":32}],29:[function(t,n,e){"use strict";function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.create=function(){var t=new b.ARRAY_TYPE(8);b.ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0);return t[3]=1,t},e.clone=function(t){var n=new b.ARRAY_TYPE(8);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n},e.fromValues=function(t,n,e,r,o,i,a,s){var u=new b.ARRAY_TYPE(8);return u[0]=t,u[1]=n,u[2]=e,u[3]=r,u[4]=o,u[5]=i,u[6]=a,u[7]=s,u},e.fromRotationTranslationValues=function(t,n,e,r,o,i,a){var s=new b.ARRAY_TYPE(8);s[0]=t,s[1]=n,s[2]=e,s[3]=r;var u=.5*o,c=.5*i,l=.5*a;return s[4]=u*r+c*e-l*n,s[5]=c*r+l*t-u*e,s[6]=l*r+u*n-c*t,s[7]=-u*t-c*n-l*e,s},e.fromRotationTranslation=i,e.fromTranslation=function(t,n){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=.5*n[0],t[5]=.5*n[1],t[6]=.5*n[2],t[7]=0,t},e.fromRotation=function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=0,t[5]=0,t[6]=0,t[7]=0,t},e.fromMat4=function(t,n){var e=v.create();o.getRotation(e,n);var r=new b.ARRAY_TYPE(3);return o.getTranslation(r,n),i(t,e,r),t},e.copy=g,e.identity=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t},e.set=function(t,n,e,r,o,i,a,s,u){return t[0]=n,t[1]=e,t[2]=r,t[3]=o,t[4]=i,t[5]=a,t[6]=s,t[7]=u,t},e.getDual=function(t,n){return t[0]=n[4],t[1]=n[5],t[2]=n[6],t[3]=n[7],t},e.setDual=function(t,n){return t[4]=n[0],t[5]=n[1],t[6]=n[2],t[7]=n[3],t},e.getTranslation=function(t,n){var e=n[4],r=n[5],o=n[6],i=n[7],a=-n[0],s=-n[1],u=-n[2],c=n[3];return t[0]=2*(e*c+i*a+r*u-o*s),t[1]=2*(r*c+i*s+o*a-e*u),t[2]=2*(o*c+i*u+e*s-r*a),t},e.translate=function(t,n,e){var r=n[0],o=n[1],i=n[2],a=n[3],s=.5*e[0],u=.5*e[1],c=.5*e[2],l=n[4],f=n[5],h=n[6],p=n[7];return t[0]=r,t[1]=o,t[2]=i,t[3]=a,t[4]=a*s+o*c-i*u+l,t[5]=a*u+i*s-r*c+f,t[6]=a*c+r*u-o*s+h,t[7]=-r*s-o*u-i*c+p,t},e.rotateX=function(t,n,e){var r=-n[0],o=-n[1],i=-n[2],a=n[3],s=n[4],u=n[5],c=n[6],l=n[7],f=s*a+l*r+u*i-c*o,h=u*a+l*o+c*r-s*i,p=c*a+l*i+s*o-u*r,d=l*a-s*r-u*o-c*i;return v.rotateX(t,n,e),r=t[0],o=t[1],i=t[2],a=t[3],t[4]=f*a+d*r+h*i-p*o,t[5]=h*a+d*o+p*r-f*i,t[6]=p*a+d*i+f*o-h*r,t[7]=d*a-f*r-h*o-p*i,t},e.rotateY=function(t,n,e){var r=-n[0],o=-n[1],i=-n[2],a=n[3],s=n[4],u=n[5],c=n[6],l=n[7],f=s*a+l*r+u*i-c*o,h=u*a+l*o+c*r-s*i,p=c*a+l*i+s*o-u*r,d=l*a-s*r-u*o-c*i;return v.rotateY(t,n,e),r=t[0],o=t[1],i=t[2],a=t[3],t[4]=f*a+d*r+h*i-p*o,t[5]=h*a+d*o+p*r-f*i,t[6]=p*a+d*i+f*o-h*r,t[7]=d*a-f*r-h*o-p*i,t},e.rotateZ=function(t,n,e){var r=-n[0],o=-n[1],i=-n[2],a=n[3],s=n[4],u=n[5],c=n[6],l=n[7],f=s*a+l*r+u*i-c*o,h=u*a+l*o+c*r-s*i,p=c*a+l*i+s*o-u*r,d=l*a-s*r-u*o-c*i;return v.rotateZ(t,n,e),r=t[0],o=t[1],i=t[2],a=t[3],t[4]=f*a+d*r+h*i-p*o,t[5]=h*a+d*o+p*r-f*i,t[6]=p*a+d*i+f*o-h*r,t[7]=d*a-f*r-h*o-p*i,t},e.rotateByQuatAppend=function(t,n,e){var r=e[0],o=e[1],i=e[2],a=e[3],s=n[0],u=n[1],c=n[2],l=n[3];return t[0]=s*a+l*r+u*i-c*o,t[1]=u*a+l*o+c*r-s*i,t[2]=c*a+l*i+s*o-u*r,t[3]=l*a-s*r-u*o-c*i,s=n[4],u=n[5],c=n[6],l=n[7],t[4]=s*a+l*r+u*i-c*o,t[5]=u*a+l*o+c*r-s*i,t[6]=c*a+l*i+s*o-u*r,t[7]=l*a-s*r-u*o-c*i,t},e.rotateByQuatPrepend=function(t,n,e){var r=n[0],o=n[1],i=n[2],a=n[3],s=e[0],u=e[1],c=e[2],l=e[3];return t[0]=r*l+a*s+o*c-i*u,t[1]=o*l+a*u+i*s-r*c,t[2]=i*l+a*c+r*u-o*s,t[3]=a*l-r*s-o*u-i*c,s=e[4],u=e[5],c=e[6],l=e[7],t[4]=r*l+a*s+o*c-i*u,t[5]=o*l+a*u+i*s-r*c,t[6]=i*l+a*c+r*u-o*s,t[7]=a*l-r*s-o*u-i*c,t},e.rotateAroundAxis=function(t,n,e,r){if(Math.abs(r)<b.EPSILON)return g(t,n);var o=Math.hypot(e[0],e[1],e[2]);r*=.5;var i=Math.sin(r),a=i*e[0]/o,s=i*e[1]/o,u=i*e[2]/o,c=Math.cos(r),l=n[0],f=n[1],h=n[2],p=n[3];t[0]=l*c+p*a+f*u-h*s,t[1]=f*c+p*s+h*a-l*u,t[2]=h*c+p*u+l*s-f*a,t[3]=p*c-l*a-f*s-h*u;var d=n[4],v=n[5],m=n[6],y=n[7];return t[4]=d*c+y*a+v*u-m*s,t[5]=v*c+y*s+m*a-d*u,t[6]=m*c+y*u+d*s-v*a,t[7]=y*c-d*a-v*s-m*u,t},e.add=function(t,n,e){return t[0]=n[0]+e[0],t[1]=n[1]+e[1],t[2]=n[2]+e[2],t[3]=n[3]+e[3],t[4]=n[4]+e[4],t[5]=n[5]+e[5],t[6]=n[6]+e[6],t[7]=n[7]+e[7],t},e.multiply=l,e.scale=function(t,n,e){return t[0]=n[0]*e,t[1]=n[1]*e,t[2]=n[2]*e,t[3]=n[3]*e,t[4]=n[4]*e,t[5]=n[5]*e,t[6]=n[6]*e,t[7]=n[7]*e,t},e.lerp=function(t,n,e,r){var o=1-r;h(n,e)<0&&(r=-r);return t[0]=n[0]*o+e[0]*r,t[1]=n[1]*o+e[1]*r,t[2]=n[2]*o+e[2]*r,t[3]=n[3]*o+e[3]*r,t[4]=n[4]*o+e[4]*r,t[5]=n[5]*o+e[5]*r,t[6]=n[6]*o+e[6]*r,t[7]=n[7]*o+e[7]*r,t},e.invert=function(t,n){var e=m(n);return t[0]=-n[0]/e,t[1]=-n[1]/e,t[2]=-n[2]/e,t[3]=n[3]/e,t[4]=-n[4]/e,t[5]=-n[5]/e,t[6]=-n[6]/e,t[7]=n[7]/e,t},e.conjugate=function(t,n){return t[0]=-n[0],t[1]=-n[1],t[2]=-n[2],t[3]=n[3],t[4]=-n[4],t[5]=-n[5],t[6]=-n[6],t[7]=n[7],t},e.normalize=function(t,n){var e=m(n);if(0<e){e=Math.sqrt(e);var r=n[0]/e,o=n[1]/e,i=n[2]/e,a=n[3]/e,s=n[4],u=n[5],c=n[6],l=n[7],f=r*s+o*u+i*c+a*l;t[0]=r,t[1]=o,t[2]=i,t[3]=a,t[4]=(s-r*f)/e,t[5]=(u-o*f)/e,t[6]=(c-i*f)/e,t[7]=(l-a*f)/e}return t},e.str=function(t){return"quat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+")"},e.exactEquals=function(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]&&t[3]===n[3]&&t[4]===n[4]&&t[5]===n[5]&&t[6]===n[6]&&t[7]===n[7]},e.equals=function(t,n){var e=t[0],r=t[1],o=t[2],i=t[3],a=t[4],s=t[5],u=t[6],c=t[7],l=n[0],f=n[1],h=n[2],p=n[3],d=n[4],v=n[5],m=n[6],y=n[7];return Math.abs(e-l)<=b.EPSILON*Math.max(1,Math.abs(e),Math.abs(l))&&Math.abs(r-f)<=b.EPSILON*Math.max(1,Math.abs(r),Math.abs(f))&&Math.abs(o-h)<=b.EPSILON*Math.max(1,Math.abs(o),Math.abs(h))&&Math.abs(i-p)<=b.EPSILON*Math.max(1,Math.abs(i),Math.abs(p))&&Math.abs(a-d)<=b.EPSILON*Math.max(1,Math.abs(a),Math.abs(d))&&Math.abs(s-v)<=b.EPSILON*Math.max(1,Math.abs(s),Math.abs(v))&&Math.abs(u-m)<=b.EPSILON*Math.max(1,Math.abs(u),Math.abs(m))&&Math.abs(c-y)<=b.EPSILON*Math.max(1,Math.abs(c),Math.abs(y))},e.sqrLen=e.squaredLength=e.len=e.length=e.dot=e.mul=e.setReal=e.getReal=void 0;var b=r(t("./common.js")),v=r(t("./quat.js")),o=r(t("./mat4.js"));function s(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return s=function(){return t},t}function r(t){if(t&&t.__esModule)return t;if(null===t||"object"!==a(t)&&"function"!=typeof t)return{default:t};var n=s();if(n&&n.has(t))return n.get(t);var e={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var i=r?Object.getOwnPropertyDescriptor(t,o):null;i&&(i.get||i.set)?Object.defineProperty(e,o,i):e[o]=t[o]}return e.default=t,n&&n.set(t,e),e}function i(t,n,e){var r=.5*e[0],o=.5*e[1],i=.5*e[2],a=n[0],s=n[1],u=n[2],c=n[3];return t[0]=a,t[1]=s,t[2]=u,t[3]=c,t[4]=r*c+o*u-i*s,t[5]=o*c+i*a-r*u,t[6]=i*c+r*s-o*a,t[7]=-r*a-o*s-i*u,t}function g(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t}var u=v.copy;e.getReal=u;var c=v.copy;function l(t,n,e){var r=n[0],o=n[1],i=n[2],a=n[3],s=e[4],u=e[5],c=e[6],l=e[7],f=n[4],h=n[5],p=n[6],d=n[7],v=e[0],m=e[1],y=e[2],b=e[3];return t[0]=r*b+a*v+o*y-i*m,t[1]=o*b+a*m+i*v-r*y,t[2]=i*b+a*y+r*m-o*v,t[3]=a*b-r*v-o*m-i*y,t[4]=r*l+a*s+o*c-i*u+f*b+d*v+h*y-p*m,t[5]=o*l+a*u+i*s-r*c+h*b+d*m+p*v-f*y,t[6]=i*l+a*c+r*u-o*s+p*b+d*y+f*m-h*v,t[7]=a*l-r*s-o*u-i*c+d*b-f*v-h*m-p*y,t}e.setReal=c;var f=l;e.mul=f;var h=v.dot;e.dot=h;var p=v.length,d=e.length=p;e.len=d;var m=v.squaredLength,y=e.squaredLength=m;e.sqrLen=y},{"./common.js":22,"./mat4.js":27,"./quat.js":28}],30:[function(t,n,e){"use strict";function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.create=r,e.clone=function(t){var n=new s.ARRAY_TYPE(2);return n[0]=t[0],n[1]=t[1],n},e.fromValues=function(t,n){var e=new s.ARRAY_TYPE(2);return e[0]=t,e[1]=n,e},e.copy=function(t,n){return t[0]=n[0],t[1]=n[1],t},e.set=function(t,n,e){return t[0]=n,t[1]=e,t},e.add=function(t,n,e){return t[0]=n[0]+e[0],t[1]=n[1]+e[1],t},e.subtract=o,e.multiply=i,e.divide=c,e.ceil=function(t,n){return t[0]=Math.ceil(n[0]),t[1]=Math.ceil(n[1]),t},e.floor=function(t,n){return t[0]=Math.floor(n[0]),t[1]=Math.floor(n[1]),t},e.min=function(t,n,e){return t[0]=Math.min(n[0],e[0]),t[1]=Math.min(n[1],e[1]),t},e.max=function(t,n,e){return t[0]=Math.max(n[0],e[0]),t[1]=Math.max(n[1],e[1]),t},e.round=function(t,n){return t[0]=Math.round(n[0]),t[1]=Math.round(n[1]),t},e.scale=function(t,n,e){return t[0]=n[0]*e,t[1]=n[1]*e,t},e.scaleAndAdd=function(t,n,e,r){return t[0]=n[0]+e[0]*r,t[1]=n[1]+e[1]*r,t},e.distance=l,e.squaredDistance=f,e.length=h,e.squaredLength=p,e.negate=function(t,n){return t[0]=-n[0],t[1]=-n[1],t},e.inverse=function(t,n){return t[0]=1/n[0],t[1]=1/n[1],t},e.normalize=function(t,n){var e=n[0],r=n[1],o=e*e+r*r;0<o&&(o=1/Math.sqrt(o));return t[0]=n[0]*o,t[1]=n[1]*o,t},e.dot=function(t,n){return t[0]*n[0]+t[1]*n[1]},e.cross=function(t,n,e){var r=n[0]*e[1]-n[1]*e[0];return t[0]=t[1]=0,t[2]=r,t},e.lerp=function(t,n,e,r){var o=n[0],i=n[1];return t[0]=o+r*(e[0]-o),t[1]=i+r*(e[1]-i),t},e.random=function(t,n){n=n||1;var e=2*s.RANDOM()*Math.PI;return t[0]=Math.cos(e)*n,t[1]=Math.sin(e)*n,t},e.transformMat2=function(t,n,e){var r=n[0],o=n[1];return t[0]=e[0]*r+e[2]*o,t[1]=e[1]*r+e[3]*o,t},e.transformMat2d=function(t,n,e){var r=n[0],o=n[1];return t[0]=e[0]*r+e[2]*o+e[4],t[1]=e[1]*r+e[3]*o+e[5],t},e.transformMat3=function(t,n,e){var r=n[0],o=n[1];return t[0]=e[0]*r+e[3]*o+e[6],t[1]=e[1]*r+e[4]*o+e[7],t},e.transformMat4=function(t,n,e){var r=n[0],o=n[1];return t[0]=e[0]*r+e[4]*o+e[12],t[1]=e[1]*r+e[5]*o+e[13],t},e.rotate=function(t,n,e,r){var o=n[0]-e[0],i=n[1]-e[1],a=Math.sin(r),s=Math.cos(r);return t[0]=o*s-i*a+e[0],t[1]=o*a+i*s+e[1],t},e.angle=function(t,n){var e=t[0],r=t[1],o=n[0],i=n[1],a=Math.sqrt(e*e+r*r)*Math.sqrt(o*o+i*i),s=a&&(e*o+r*i)/a;return Math.acos(Math.min(Math.max(s,-1),1))},e.zero=function(t){return t[0]=0,t[1]=0,t},e.str=function(t){return"vec2("+t[0]+", "+t[1]+")"},e.exactEquals=function(t,n){return t[0]===n[0]&&t[1]===n[1]},e.equals=function(t,n){var e=t[0],r=t[1],o=n[0],i=n[1];return Math.abs(e-o)<=s.EPSILON*Math.max(1,Math.abs(e),Math.abs(o))&&Math.abs(r-i)<=s.EPSILON*Math.max(1,Math.abs(r),Math.abs(i))},e.forEach=e.sqrLen=e.sqrDist=e.dist=e.div=e.mul=e.sub=e.len=void 0;var s=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==a(t)&&"function"!=typeof t)return{default:t};var n=u();if(n&&n.has(t))return n.get(t);var e={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var i=r?Object.getOwnPropertyDescriptor(t,o):null;i&&(i.get||i.set)?Object.defineProperty(e,o,i):e[o]=t[o]}e.default=t,n&&n.set(t,e);return e}(t("./common.js"));function u(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return u=function(){return t},t}function r(){var t=new s.ARRAY_TYPE(2);return s.ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0),t}function o(t,n,e){return t[0]=n[0]-e[0],t[1]=n[1]-e[1],t}function i(t,n,e){return t[0]=n[0]*e[0],t[1]=n[1]*e[1],t}function c(t,n,e){return t[0]=n[0]/e[0],t[1]=n[1]/e[1],t}function l(t,n){var e=n[0]-t[0],r=n[1]-t[1];return Math.hypot(e,r)}function f(t,n){var e=n[0]-t[0],r=n[1]-t[1];return e*e+r*r}function h(t){var n=t[0],e=t[1];return Math.hypot(n,e)}function p(t){var n=t[0],e=t[1];return n*n+e*e}var d=h;e.len=d;var v=o;e.sub=v;var m=i;e.mul=m;var y=c;e.div=y;var b=l;e.dist=b;var g=f;e.sqrDist=g;var M=p;e.sqrLen=M;var w,x=(w=r(),function(t,n,e,r,o,i){var a,s;for(n=n||2,e=e||0,s=r?Math.min(r*n+e,t.length):t.length,a=e;a<s;a+=n)w[0]=t[a],w[1]=t[a+1],o(w,w,i),t[a]=w[0],t[a+1]=w[1];return t});e.forEach=x},{"./common.js":22}],31:[function(t,n,e){"use strict";function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.create=r,e.clone=function(t){var n=new u.ARRAY_TYPE(3);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n},e.length=o,e.fromValues=function(t,n,e){var r=new u.ARRAY_TYPE(3);return r[0]=t,r[1]=n,r[2]=e,r},e.copy=function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t},e.set=function(t,n,e,r){return t[0]=n,t[1]=e,t[2]=r,t},e.add=function(t,n,e){return t[0]=n[0]+e[0],t[1]=n[1]+e[1],t[2]=n[2]+e[2],t},e.subtract=i,e.multiply=c,e.divide=l,e.ceil=function(t,n){return t[0]=Math.ceil(n[0]),t[1]=Math.ceil(n[1]),t[2]=Math.ceil(n[2]),t},e.floor=function(t,n){return t[0]=Math.floor(n[0]),t[1]=Math.floor(n[1]),t[2]=Math.floor(n[2]),t},e.min=function(t,n,e){return t[0]=Math.min(n[0],e[0]),t[1]=Math.min(n[1],e[1]),t[2]=Math.min(n[2],e[2]),t},e.max=function(t,n,e){return t[0]=Math.max(n[0],e[0]),t[1]=Math.max(n[1],e[1]),t[2]=Math.max(n[2],e[2]),t},e.round=function(t,n){return t[0]=Math.round(n[0]),t[1]=Math.round(n[1]),t[2]=Math.round(n[2]),t},e.scale=function(t,n,e){return t[0]=n[0]*e,t[1]=n[1]*e,t[2]=n[2]*e,t},e.scaleAndAdd=function(t,n,e,r){return t[0]=n[0]+e[0]*r,t[1]=n[1]+e[1]*r,t[2]=n[2]+e[2]*r,t},e.distance=f,e.squaredDistance=h,e.squaredLength=p,e.negate=function(t,n){return t[0]=-n[0],t[1]=-n[1],t[2]=-n[2],t},e.inverse=function(t,n){return t[0]=1/n[0],t[1]=1/n[1],t[2]=1/n[2],t},e.normalize=function(t,n){var e=n[0],r=n[1],o=n[2],i=e*e+r*r+o*o;0<i&&(i=1/Math.sqrt(i));return t[0]=n[0]*i,t[1]=n[1]*i,t[2]=n[2]*i,t},e.dot=d,e.cross=function(t,n,e){var r=n[0],o=n[1],i=n[2],a=e[0],s=e[1],u=e[2];return t[0]=o*u-i*s,t[1]=i*a-r*u,t[2]=r*s-o*a,t},e.lerp=function(t,n,e,r){var o=n[0],i=n[1],a=n[2];return t[0]=o+r*(e[0]-o),t[1]=i+r*(e[1]-i),t[2]=a+r*(e[2]-a),t},e.hermite=function(t,n,e,r,o,i){var a=i*i,s=a*(2*i-3)+1,u=a*(i-2)+i,c=a*(i-1),l=a*(3-2*i);return t[0]=n[0]*s+e[0]*u+r[0]*c+o[0]*l,t[1]=n[1]*s+e[1]*u+r[1]*c+o[1]*l,t[2]=n[2]*s+e[2]*u+r[2]*c+o[2]*l,t},e.bezier=function(t,n,e,r,o,i){var a=1-i,s=a*a,u=i*i,c=s*a,l=3*i*s,f=3*u*a,h=u*i;return t[0]=n[0]*c+e[0]*l+r[0]*f+o[0]*h,t[1]=n[1]*c+e[1]*l+r[1]*f+o[1]*h,t[2]=n[2]*c+e[2]*l+r[2]*f+o[2]*h,t},e.random=function(t,n){n=n||1;var e=2*u.RANDOM()*Math.PI,r=2*u.RANDOM()-1,o=Math.sqrt(1-r*r)*n;return t[0]=Math.cos(e)*o,t[1]=Math.sin(e)*o,t[2]=r*n,t},e.transformMat4=function(t,n,e){var r=n[0],o=n[1],i=n[2],a=e[3]*r+e[7]*o+e[11]*i+e[15];return a=a||1,t[0]=(e[0]*r+e[4]*o+e[8]*i+e[12])/a,t[1]=(e[1]*r+e[5]*o+e[9]*i+e[13])/a,t[2]=(e[2]*r+e[6]*o+e[10]*i+e[14])/a,t},e.transformMat3=function(t,n,e){var r=n[0],o=n[1],i=n[2];return t[0]=r*e[0]+o*e[3]+i*e[6],t[1]=r*e[1]+o*e[4]+i*e[7],t[2]=r*e[2]+o*e[5]+i*e[8],t},e.transformQuat=function(t,n,e){var r=e[0],o=e[1],i=e[2],a=e[3],s=n[0],u=n[1],c=n[2],l=o*c-i*u,f=i*s-r*c,h=r*u-o*s,p=o*h-i*f,d=i*l-r*h,v=r*f-o*l,m=2*a;return l*=m,f*=m,h*=m,p*=2,d*=2,v*=2,t[0]=s+l+p,t[1]=u+f+d,t[2]=c+h+v,t},e.rotateX=function(t,n,e,r){var o=[],i=[];return o[0]=n[0]-e[0],o[1]=n[1]-e[1],o[2]=n[2]-e[2],i[0]=o[0],i[1]=o[1]*Math.cos(r)-o[2]*Math.sin(r),i[2]=o[1]*Math.sin(r)+o[2]*Math.cos(r),t[0]=i[0]+e[0],t[1]=i[1]+e[1],t[2]=i[2]+e[2],t},e.rotateY=function(t,n,e,r){var o=[],i=[];return o[0]=n[0]-e[0],o[1]=n[1]-e[1],o[2]=n[2]-e[2],i[0]=o[2]*Math.sin(r)+o[0]*Math.cos(r),i[1]=o[1],i[2]=o[2]*Math.cos(r)-o[0]*Math.sin(r),t[0]=i[0]+e[0],t[1]=i[1]+e[1],t[2]=i[2]+e[2],t},e.rotateZ=function(t,n,e,r){var o=[],i=[];return o[0]=n[0]-e[0],o[1]=n[1]-e[1],o[2]=n[2]-e[2],i[0]=o[0]*Math.cos(r)-o[1]*Math.sin(r),i[1]=o[0]*Math.sin(r)+o[1]*Math.cos(r),i[2]=o[2],t[0]=i[0]+e[0],t[1]=i[1]+e[1],t[2]=i[2]+e[2],t},e.angle=function(t,n){var e=t[0],r=t[1],o=t[2],i=n[0],a=n[1],s=n[2],u=Math.sqrt(e*e+r*r+o*o),c=Math.sqrt(i*i+a*a+s*s),l=u*c,f=l&&d(t,n)/l;return Math.acos(Math.min(Math.max(f,-1),1))},e.zero=function(t){return t[0]=0,t[1]=0,t[2]=0,t},e.str=function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},e.exactEquals=function(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]},e.equals=function(t,n){var e=t[0],r=t[1],o=t[2],i=n[0],a=n[1],s=n[2];return Math.abs(e-i)<=u.EPSILON*Math.max(1,Math.abs(e),Math.abs(i))&&Math.abs(r-a)<=u.EPSILON*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(o-s)<=u.EPSILON*Math.max(1,Math.abs(o),Math.abs(s))},e.forEach=e.sqrLen=e.len=e.sqrDist=e.dist=e.div=e.mul=e.sub=void 0;var u=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==a(t)&&"function"!=typeof t)return{default:t};var n=s();if(n&&n.has(t))return n.get(t);var e={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var i=r?Object.getOwnPropertyDescriptor(t,o):null;i&&(i.get||i.set)?Object.defineProperty(e,o,i):e[o]=t[o]}e.default=t,n&&n.set(t,e);return e}(t("./common.js"));function s(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return s=function(){return t},t}function r(){var t=new u.ARRAY_TYPE(3);return u.ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function o(t){var n=t[0],e=t[1],r=t[2];return Math.hypot(n,e,r)}function i(t,n,e){return t[0]=n[0]-e[0],t[1]=n[1]-e[1],t[2]=n[2]-e[2],t}function c(t,n,e){return t[0]=n[0]*e[0],t[1]=n[1]*e[1],t[2]=n[2]*e[2],t}function l(t,n,e){return t[0]=n[0]/e[0],t[1]=n[1]/e[1],t[2]=n[2]/e[2],t}function f(t,n){var e=n[0]-t[0],r=n[1]-t[1],o=n[2]-t[2];return Math.hypot(e,r,o)}function h(t,n){var e=n[0]-t[0],r=n[1]-t[1],o=n[2]-t[2];return e*e+r*r+o*o}function p(t){var n=t[0],e=t[1],r=t[2];return n*n+e*e+r*r}function d(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]}var v=i;e.sub=v;var m=c;e.mul=m;var y=l;e.div=y;var b=f;e.dist=b;var g=h;e.sqrDist=g;var M=o;e.len=M;var w=p;e.sqrLen=w;var x,P=(x=r(),function(t,n,e,r,o,i){var a,s;for(n=n||3,e=e||0,s=r?Math.min(r*n+e,t.length):t.length,a=e;a<s;a+=n)x[0]=t[a],x[1]=t[a+1],x[2]=t[a+2],o(x,x,i),t[a]=x[0],t[a+1]=x[1],t[a+2]=x[2];return t});e.forEach=P},{"./common.js":22}],32:[function(t,n,e){"use strict";function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.create=r,e.clone=function(t){var n=new l.ARRAY_TYPE(4);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n},e.fromValues=function(t,n,e,r){var o=new l.ARRAY_TYPE(4);return o[0]=t,o[1]=n,o[2]=e,o[3]=r,o},e.copy=function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t},e.set=function(t,n,e,r,o){return t[0]=n,t[1]=e,t[2]=r,t[3]=o,t},e.add=function(t,n,e){return t[0]=n[0]+e[0],t[1]=n[1]+e[1],t[2]=n[2]+e[2],t[3]=n[3]+e[3],t},e.subtract=o,e.multiply=i,e.divide=u,e.ceil=function(t,n){return t[0]=Math.ceil(n[0]),t[1]=Math.ceil(n[1]),t[2]=Math.ceil(n[2]),t[3]=Math.ceil(n[3]),t},e.floor=function(t,n){return t[0]=Math.floor(n[0]),t[1]=Math.floor(n[1]),t[2]=Math.floor(n[2]),t[3]=Math.floor(n[3]),t},e.min=function(t,n,e){return t[0]=Math.min(n[0],e[0]),t[1]=Math.min(n[1],e[1]),t[2]=Math.min(n[2],e[2]),t[3]=Math.min(n[3],e[3]),t},e.max=function(t,n,e){return t[0]=Math.max(n[0],e[0]),t[1]=Math.max(n[1],e[1]),t[2]=Math.max(n[2],e[2]),t[3]=Math.max(n[3],e[3]),t},e.round=function(t,n){return t[0]=Math.round(n[0]),t[1]=Math.round(n[1]),t[2]=Math.round(n[2]),t[3]=Math.round(n[3]),t},e.scale=function(t,n,e){return t[0]=n[0]*e,t[1]=n[1]*e,t[2]=n[2]*e,t[3]=n[3]*e,t},e.scaleAndAdd=function(t,n,e,r){return t[0]=n[0]+e[0]*r,t[1]=n[1]+e[1]*r,t[2]=n[2]+e[2]*r,t[3]=n[3]+e[3]*r,t},e.distance=c,e.squaredDistance=f,e.length=h,e.squaredLength=p,e.negate=function(t,n){return t[0]=-n[0],t[1]=-n[1],t[2]=-n[2],t[3]=-n[3],t},e.inverse=function(t,n){return t[0]=1/n[0],t[1]=1/n[1],t[2]=1/n[2],t[3]=1/n[3],t},e.normalize=function(t,n){var e=n[0],r=n[1],o=n[2],i=n[3],a=e*e+r*r+o*o+i*i;0<a&&(a=1/Math.sqrt(a));return t[0]=e*a,t[1]=r*a,t[2]=o*a,t[3]=i*a,t},e.dot=function(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]+t[3]*n[3]},e.cross=function(t,n,e,r){var o=e[0]*r[1]-e[1]*r[0],i=e[0]*r[2]-e[2]*r[0],a=e[0]*r[3]-e[3]*r[0],s=e[1]*r[2]-e[2]*r[1],u=e[1]*r[3]-e[3]*r[1],c=e[2]*r[3]-e[3]*r[2],l=n[0],f=n[1],h=n[2],p=n[3];return t[0]=f*c-h*u+p*s,t[1]=-l*c+h*a-p*i,t[2]=l*u-f*a+p*o,t[3]=-l*s+f*i-h*o,t},e.lerp=function(t,n,e,r){var o=n[0],i=n[1],a=n[2],s=n[3];return t[0]=o+r*(e[0]-o),t[1]=i+r*(e[1]-i),t[2]=a+r*(e[2]-a),t[3]=s+r*(e[3]-s),t},e.random=function(t,n){var e,r,o,i,a,s;n=n||1;for(;e=2*l.RANDOM()-1,r=2*l.RANDOM()-1,a=e*e+r*r,1<=a;);for(;o=2*l.RANDOM()-1,i=2*l.RANDOM()-1,s=o*o+i*i,1<=s;);var u=Math.sqrt((1-a)/s);return t[0]=n*e,t[1]=n*r,t[2]=n*o*u,t[3]=n*i*u,t},e.transformMat4=function(t,n,e){var r=n[0],o=n[1],i=n[2],a=n[3];return t[0]=e[0]*r+e[4]*o+e[8]*i+e[12]*a,t[1]=e[1]*r+e[5]*o+e[9]*i+e[13]*a,t[2]=e[2]*r+e[6]*o+e[10]*i+e[14]*a,t[3]=e[3]*r+e[7]*o+e[11]*i+e[15]*a,t},e.transformQuat=function(t,n,e){var r=n[0],o=n[1],i=n[2],a=e[0],s=e[1],u=e[2],c=e[3],l=c*r+s*i-u*o,f=c*o+u*r-a*i,h=c*i+a*o-s*r,p=-a*r-s*o-u*i;return t[0]=l*c+p*-a+f*-u-h*-s,t[1]=f*c+p*-s+h*-a-l*-u,t[2]=h*c+p*-u+l*-s-f*-a,t[3]=n[3],t},e.zero=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t},e.str=function(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},e.exactEquals=function(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]&&t[3]===n[3]},e.equals=function(t,n){var e=t[0],r=t[1],o=t[2],i=t[3],a=n[0],s=n[1],u=n[2],c=n[3];return Math.abs(e-a)<=l.EPSILON*Math.max(1,Math.abs(e),Math.abs(a))&&Math.abs(r-s)<=l.EPSILON*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(o-u)<=l.EPSILON*Math.max(1,Math.abs(o),Math.abs(u))&&Math.abs(i-c)<=l.EPSILON*Math.max(1,Math.abs(i),Math.abs(c))},e.forEach=e.sqrLen=e.len=e.sqrDist=e.dist=e.div=e.mul=e.sub=void 0;var l=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==a(t)&&"function"!=typeof t)return{default:t};var n=s();if(n&&n.has(t))return n.get(t);var e={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var i=r?Object.getOwnPropertyDescriptor(t,o):null;i&&(i.get||i.set)?Object.defineProperty(e,o,i):e[o]=t[o]}e.default=t,n&&n.set(t,e);return e}(t("./common.js"));function s(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return s=function(){return t},t}function r(){var t=new l.ARRAY_TYPE(4);return l.ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function o(t,n,e){return t[0]=n[0]-e[0],t[1]=n[1]-e[1],t[2]=n[2]-e[2],t[3]=n[3]-e[3],t}function i(t,n,e){return t[0]=n[0]*e[0],t[1]=n[1]*e[1],t[2]=n[2]*e[2],t[3]=n[3]*e[3],t}function u(t,n,e){return t[0]=n[0]/e[0],t[1]=n[1]/e[1],t[2]=n[2]/e[2],t[3]=n[3]/e[3],t}function c(t,n){var e=n[0]-t[0],r=n[1]-t[1],o=n[2]-t[2],i=n[3]-t[3];return Math.hypot(e,r,o,i)}function f(t,n){var e=n[0]-t[0],r=n[1]-t[1],o=n[2]-t[2],i=n[3]-t[3];return e*e+r*r+o*o+i*i}function h(t){var n=t[0],e=t[1],r=t[2],o=t[3];return Math.hypot(n,e,r,o)}function p(t){var n=t[0],e=t[1],r=t[2],o=t[3];return n*n+e*e+r*r+o*o}var d=o;e.sub=d;var v=i;e.mul=v;var m=u;e.div=m;var y=c;e.dist=y;var b=f;e.sqrDist=b;var g=h;e.len=g;var M=p;e.sqrLen=M;var w,x=(w=r(),function(t,n,e,r,o,i){var a,s;for(n=n||4,e=e||0,s=r?Math.min(r*n+e,t.length):t.length,a=e;a<s;a+=n)w[0]=t[a],w[1]=t[a+1],w[2]=t[a+2],w[3]=t[a+3],o(w,w,i),t[a]=w[0],t[a+1]=w[1],t[a+2]=w[2],t[a+3]=w[3];return t});e.forEach=x},{"./common.js":22}],33:[function(t,n,e){var r,o,i=n.exports={};function a(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function u(n){if(r===setTimeout)return setTimeout(n,0);if((r===a||!r)&&setTimeout)return r=setTimeout,setTimeout(n,0);try{return r(n,0)}catch(t){try{return r.call(null,n,0)}catch(t){return r.call(this,n,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:a}catch(t){r=a}try{o="function"==typeof clearTimeout?clearTimeout:s}catch(t){o=s}}();var c,l=[],f=!1,h=-1;function p(){f&&c&&(f=!1,c.length?l=c.concat(l):h=-1,l.length&&d())}function d(){if(!f){var t=u(p);f=!0;for(var n=l.length;n;){for(c=l,l=[];++h<n;)c&&c[h].run();h=-1,n=l.length}c=null,f=!1,function(n){if(o===clearTimeout)return clearTimeout(n);if((o===s||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(n);try{o(n)}catch(t){try{return o.call(null,n)}catch(t){return o.call(this,n)}}}(t)}}function v(t,n){this.fun=t,this.array=n}function m(){}i.nextTick=function(t){var n=new Array(arguments.length-1);if(1<arguments.length)for(var e=1;e<arguments.length;e++)n[e-1]=arguments[e];l.push(new v(t,n)),1!==l.length||f||u(d)},v.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=m,i.addListener=m,i.once=m,i.off=m,i.removeListener=m,i.removeAllListeners=m,i.emit=m,i.prependListener=m,i.prependOnceListener=m,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},{}],34:[function(t,o,i){(function(In){var t,n,e,r;t=this,n=function(){var t="object"==typeof self&&self.self===self&&self||"object"==typeof In&&In.global===In&&In||Function("return this")()||{},r=Array.prototype,a=Object.prototype,p="undefined"!=typeof Symbol?Symbol.prototype:null,o=r.push,u=r.slice,d=a.toString,i=a.hasOwnProperty,n="undefined"!=typeof ArrayBuffer,e=Array.isArray,s=Object.keys,c=Object.create,l=n&&ArrayBuffer.isView,f=isNaN,h=isFinite,v=!{toString:null}.propertyIsEnumerable("toString"),m=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],y=Math.pow(2,53)-1;function b(o,i){return i=null==i?o.length-1:+i,function(){for(var t=Math.max(arguments.length-i,0),n=Array(t),e=0;e<t;e++)n[e]=arguments[e+i];switch(i){case 0:return o.call(this,n);case 1:return o.call(this,arguments[0],n);case 2:return o.call(this,arguments[0],arguments[1],n)}var r=Array(i+1);for(e=0;e<i;e++)r[e]=arguments[e];return r[i]=n,o.apply(this,r)}}function g(t){var n=typeof t;return"function"==n||"object"==n&&!!t}function M(t){return!0===t||!1===t||"[object Boolean]"===d.call(t)}function w(n){return function(t){return d.call(t)==="[object "+n+"]"}}var x=w("String"),P=w("Number"),_=w("Date"),S=w("RegExp"),O=w("Error"),E=w("Symbol"),A=w("Map"),j=w("WeakMap"),L=w("Set"),R=w("WeakSet"),I=w("ArrayBuffer"),N=w("DataView"),T=e||w("Array"),F=w("Function"),q=t.document&&t.document.childNodes;"function"!=typeof/./&&"object"!=typeof Int8Array&&"function"!=typeof q&&(F=function(t){return"function"==typeof t||!1});var k=F;function D(t,n){return null!=t&&i.call(t,n)}var Y=w("Arguments");!function(){Y(arguments)||(Y=function(t){return D(t,"callee")})}();var z=Y;function V(t){return P(t)&&f(t)}function C(t){return function(){return t}}function B(e){return function(t){var n=e(t);return"number"==typeof n&&0<=n&&n<=y}}function W(n){return function(t){return null==t?void 0:t[n]}}var H=W("byteLength"),J=B(H),G=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/;var U=n?function(t){return l?l(t)&&!N(t):J(t)&&G.test(d.call(t))}:C(!1),Z=W("length"),Q=B(Z);function X(t,n){n=function(n){for(var e={},t=n.length,r=0;r<t;++r)e[n[r]]=!0;return{contains:function(t){return e[t]},push:function(t){return e[t]=!0,n.push(t)}}}(n);var e=m.length,r=t.constructor,o=k(r)&&r.prototype||a,i="constructor";for(D(t,i)&&!n.contains(i)&&n.push(i);e--;)(i=m[e])in t&&t[i]!==o[i]&&!n.contains(i)&&n.push(i)}function K(t){if(!g(t))return[];if(s)return s(t);var n=[];for(var e in t)D(t,e)&&n.push(e);return v&&X(t,n),n}function $(t,n){var e=K(n),r=e.length;if(null==t)return!r;for(var o=Object(t),i=0;i<r;i++){var a=e[i];if(n[a]!==o[a]||!(a in o))return!1}return!0}function tt(t){return t instanceof tt?t:this instanceof tt?void(this._wrapped=t):new tt(t)}function nt(t,n,e,r){if(t===n)return 0!==t||1/t==1/n;if(null==t||null==n)return!1;if(t!=t)return n!=n;var o=typeof t;return("function"==o||"object"==o||"object"==typeof n)&&function t(n,e,r,o){n instanceof tt&&(n=n._wrapped);e instanceof tt&&(e=e._wrapped);var i=d.call(n);if(i!==d.call(e))return!1;switch(i){case"[object RegExp]":case"[object String]":return""+n==""+e;case"[object Number]":return+n!=+n?+e!=+e:0==+n?1/n==1/e:+n==+e;case"[object Date]":case"[object Boolean]":return+n==+e;case"[object Symbol]":return p.valueOf.call(n)===p.valueOf.call(e);case"[object ArrayBuffer]":return t(new DataView(n),new DataView(e),r,o);case"[object DataView]":var a=H(n);if(a!==H(e))return!1;for(;a--;)if(n.getUint8(a)!==e.getUint8(a))return!1;return!0}if(U(n))return t(new DataView(n.buffer),new DataView(e.buffer),r,o);var s="[object Array]"===i;if(!s){if("object"!=typeof n||"object"!=typeof e)return!1;var u=n.constructor,c=e.constructor;if(u!==c&&!(k(u)&&u instanceof u&&k(c)&&c instanceof c)&&"constructor"in n&&"constructor"in e)return!1}r=r||[];o=o||[];var l=r.length;for(;l--;)if(r[l]===n)return o[l]===e;r.push(n);o.push(e);if(s){if((l=n.length)!==e.length)return!1;for(;l--;)if(!nt(n[l],e[l],r,o))return!1}else{var f,h=K(n);if(l=h.length,K(e).length!==l)return!1;for(;l--;)if(f=h[l],!D(e,f)||!nt(n[f],e[f],r,o))return!1}r.pop();o.pop();return!0}(t,n,e,r)}function et(t){if(!g(t))return[];var n=[];for(var e in t)n.push(e);return v&&X(t,n),n}function rt(t){for(var n=K(t),e=n.length,r=Array(e),o=0;o<e;o++)r[o]=t[n[o]];return r}function ot(t){for(var n={},e=K(t),r=0,o=e.length;r<o;r++)n[t[e[r]]]=e[r];return n}function it(t){var n=[];for(var e in t)k(t[e])&&n.push(e);return n.sort()}function at(u,c){return function(t){var n=arguments.length;if(c&&(t=Object(t)),n<2||null==t)return t;for(var e=1;e<n;e++)for(var r=arguments[e],o=u(r),i=o.length,a=0;a<i;a++){var s=o[a];c&&void 0!==t[s]||(t[s]=r[s])}return t}}tt.VERSION="1.11.0",tt.prototype.valueOf=tt.prototype.toJSON=tt.prototype.value=function(){return this._wrapped},tt.prototype.toString=function(){return String(this._wrapped)};var st=at(et),ut=at(K),ct=at(et,!0);function lt(t){if(!g(t))return{};if(c)return c(t);var n=function(){};n.prototype=t;var e=new n;return n.prototype=null,e}function ft(t){return g(t)?T(t)?t.slice():st({},t):t}function ht(t){return t}function pt(n){return n=ut({},n),function(t){return $(t,n)}}function dt(t,n){for(var e=n.length,r=0;r<e;r++){if(null==t)return;t=t[n[r]]}return e?t:void 0}function vt(n){return T(n)?function(t){return dt(t,n)}:W(n)}function mt(o,i,t){if(void 0===i)return o;switch(null==t?3:t){case 1:return function(t){return o.call(i,t)};case 3:return function(t,n,e){return o.call(i,t,n,e)};case 4:return function(t,n,e,r){return o.call(i,t,n,e,r)}}return function(){return o.apply(i,arguments)}}function yt(t,n,e){return null==t?ht:k(t)?mt(t,n,e):g(t)&&!T(t)?pt(t):vt(t)}function bt(t,n){return yt(t,n,1/0)}function gt(t,n,e){return tt.iteratee!==bt?tt.iteratee(t,n):yt(t,n,e)}function Mt(t,n){return null==n&&(n=t,t=0),t+Math.floor(Math.random()*(n-t+1))}tt.iteratee=bt;var wt=Date.now||function(){return(new Date).getTime()};function xt(n){function e(t){return n[t]}var t="(?:"+K(n).join("|")+")",r=RegExp(t),o=RegExp(t,"g");return function(t){return t=null==t?"":""+t,r.test(t)?t.replace(o,e):t}}var Pt={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},_t=xt(Pt),St=xt(ot(Pt)),Ot=tt.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},Et=/(.)^/,At={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},jt=/\\|'|\r|\n|\u2028|\u2029/g;function Lt(t){return"\\"+At[t]}var Rt=0;function It(t,n,e,r,o){if(!(r instanceof n))return t.apply(e,o);var i=lt(t.prototype),a=t.apply(i,o);return g(a)?a:i}var Nt=b(function(o,i){var a=Nt.placeholder,s=function(){for(var t=0,n=i.length,e=Array(n),r=0;r<n;r++)e[r]=i[r]===a?arguments[t++]:i[r];for(;t<arguments.length;)e.push(arguments[t++]);return It(o,s,this,this,e)};return s});Nt.placeholder=tt;var Tt=b(function(n,e,r){if(!k(n))throw new TypeError("Bind must be called on a function");var o=b(function(t){return It(n,o,e,this,r.concat(t))});return o});function Ft(t,n,e,r){if(r=r||[],n||0===n){if(n<=0)return r.concat(t)}else n=1/0;for(var o=r.length,i=0,a=Z(t);i<a;i++){var s=t[i];if(Q(s)&&(T(s)||z(s)))if(1<n)Ft(s,n-1,e,r),o=r.length;else for(var u=0,c=s.length;u<c;)r[o++]=s[u++];else e||(r[o++]=s)}return r}var qt=b(function(t,n){var e=(n=Ft(n,!1,!1)).length;if(e<1)throw new Error("bindAll must be passed function names");for(;e--;){var r=n[e];t[r]=Tt(t[r],t)}return t});var kt=b(function(t,n,e){return setTimeout(function(){return t.apply(null,e)},n)}),Dt=Nt(kt,tt,1);function Yt(t){return function(){return!t.apply(this,arguments)}}function zt(t,n){var e;return function(){return 0<--t&&(e=n.apply(this,arguments)),t<=1&&(n=null),e}}var Vt=Nt(zt,2);function Ct(t,n,e){n=gt(n,e);for(var r,o=K(t),i=0,a=o.length;i<a;i++)if(n(t[r=o[i]],r,t))return r}function Bt(i){return function(t,n,e){n=gt(n,e);for(var r=Z(t),o=0<i?0:r-1;0<=o&&o<r;o+=i)if(n(t[o],o,t))return o;return-1}}var Wt=Bt(1),Ht=Bt(-1);function Jt(t,n,e,r){for(var o=(e=gt(e,r,1))(n),i=0,a=Z(t);i<a;){var s=Math.floor((i+a)/2);e(t[s])<o?i=s+1:a=s}return i}function Gt(i,a,s){return function(t,n,e){var r=0,o=Z(t);if("number"==typeof e)0<i?r=0<=e?e:Math.max(e+o,r):o=0<=e?Math.min(e+1,o):e+o+1;else if(s&&e&&o)return t[e=s(t,n)]===n?e:-1;if(n!=n)return 0<=(e=a(u.call(t,r,o),V))?e+r:-1;for(e=0<i?r:o-1;0<=e&&e<o;e+=i)if(t[e]===n)return e;return-1}}var Ut=Gt(1,Wt,Jt),Zt=Gt(-1,Ht);function Qt(t,n,e){var r=(Q(t)?Wt:Ct)(t,n,e);if(void 0!==r&&-1!==r)return t[r]}function Xt(t,n,e){var r,o;if(n=mt(n,e),Q(t))for(r=0,o=t.length;r<o;r++)n(t[r],r,t);else{var i=K(t);for(r=0,o=i.length;r<o;r++)n(t[i[r]],i[r],t)}return t}function Kt(t,n,e){n=gt(n,e);for(var r=!Q(t)&&K(t),o=(r||t).length,i=Array(o),a=0;a<o;a++){var s=r?r[a]:a;i[a]=n(t[s],s,t)}return i}function $t(u){return function(t,n,e,r){var o=3<=arguments.length;return function(t,n,e,r){var o=!Q(t)&&K(t),i=(o||t).length,a=0<u?0:i-1;for(r||(e=t[o?o[a]:a],a+=u);0<=a&&a<i;a+=u){var s=o?o[a]:a;e=n(e,t[s],s,t)}return e}(t,mt(n,r,4),e,o)}}var tn=$t(1),nn=$t(-1);function en(t,r,n){var o=[];return r=gt(r,n),Xt(t,function(t,n,e){r(t,n,e)&&o.push(t)}),o}function rn(t,n,e){n=gt(n,e);for(var r=!Q(t)&&K(t),o=(r||t).length,i=0;i<o;i++){var a=r?r[i]:i;if(!n(t[a],a,t))return!1}return!0}function on(t,n,e){n=gt(n,e);for(var r=!Q(t)&&K(t),o=(r||t).length,i=0;i<o;i++){var a=r?r[i]:i;if(n(t[a],a,t))return!0}return!1}function an(t,n,e,r){return Q(t)||(t=rt(t)),"number"==typeof e&&!r||(e=0),0<=Ut(t,n,e)}var sn=b(function(t,e,r){var o,i;return k(e)?i=e:T(e)&&(o=e.slice(0,-1),e=e[e.length-1]),Kt(t,function(t){var n=i;if(!n){if(o&&o.length&&(t=dt(t,o)),null==t)return;n=t[e]}return null==n?n:n.apply(t,r)})});function un(t,n){return Kt(t,vt(n))}function cn(t,r,n){var e,o,i=-1/0,a=-1/0;if(null==r||"number"==typeof r&&"object"!=typeof t[0]&&null!=t)for(var s=0,u=(t=Q(t)?t:rt(t)).length;s<u;s++)null!=(e=t[s])&&i<e&&(i=e);else r=gt(r,n),Xt(t,function(t,n,e){o=r(t,n,e),(a<o||o===-1/0&&i===-1/0)&&(i=t,a=o)});return i}function ln(t,n,e){if(null==n||e)return Q(t)||(t=rt(t)),t[Mt(t.length-1)];var r=Q(t)?ft(t):rt(t),o=Z(r);n=Math.max(Math.min(n,o),0);for(var i=o-1,a=0;a<n;a++){var s=Mt(a,i),u=r[a];r[a]=r[s],r[s]=u}return r.slice(0,n)}function fn(a,n){return function(r,o,t){var i=n?[[],[]]:{};return o=gt(o,t),Xt(r,function(t,n){var e=o(t,n,r);a(i,t,e)}),i}}var hn=fn(function(t,n,e){D(t,e)?t[e].push(n):t[e]=[n]}),pn=fn(function(t,n,e){t[e]=n}),dn=fn(function(t,n,e){D(t,e)?t[e]++:t[e]=1}),vn=fn(function(t,n,e){t[e?0:1].push(n)},!0),mn=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function yn(t,n,e){return n in e}var bn=b(function(t,n){var e={},r=n[0];if(null==t)return e;k(r)?(1<n.length&&(r=mt(r,n[1])),n=et(t)):(r=yn,n=Ft(n,!1,!1),t=Object(t));for(var o=0,i=n.length;o<i;o++){var a=n[o],s=t[a];r(s,a,t)&&(e[a]=s)}return e}),gn=b(function(t,e){var n,r=e[0];return k(r)?(r=Yt(r),1<e.length&&(n=e[1])):(e=Kt(Ft(e,!1,!1),String),r=function(t,n){return!an(e,n)}),bn(t,r,n)});function Mn(t,n,e){return u.call(t,0,Math.max(0,t.length-(null==n||e?1:n)))}function wn(t,n,e){return null==t||t.length<1?null==n||e?void 0:[]:null==n||e?t[0]:Mn(t,t.length-n)}function xn(t,n,e){return u.call(t,null==n||e?1:n)}var Pn=b(function(t,n){return n=Ft(n,!0,!0),en(t,function(t){return!an(n,t)})}),_n=b(function(t,n){return Pn(t,n)});function Sn(t,n,e,r){M(n)||(r=e,e=n,n=!1),null!=e&&(e=gt(e,r));for(var o=[],i=[],a=0,s=Z(t);a<s;a++){var u=t[a],c=e?e(u,a,t):u;n&&!e?(a&&i===c||o.push(u),i=c):e?an(i,c)||(i.push(c),o.push(u)):an(o,u)||o.push(u)}return o}var On=b(function(t){return Sn(Ft(t,!0,!0))});function En(t){for(var n=t&&cn(t,Z).length||0,e=Array(n),r=0;r<n;r++)e[r]=un(t,r);return e}var An=b(En);function jn(t,n){return t._chain?tt(n).chain():n}function Ln(e){return Xt(it(e),function(t){var n=tt[t]=e[t];tt.prototype[t]=function(){var t=[this._wrapped];return o.apply(t,arguments),jn(this,n.apply(tt,t))}}),tt}Xt(["pop","push","reverse","shift","sort","splice","unshift"],function(n){var e=r[n];tt.prototype[n]=function(){var t=this._wrapped;return null!=t&&(e.apply(t,arguments),"shift"!==n&&"splice"!==n||0!==t.length||delete t[0]),jn(this,t)}}),Xt(["concat","join","slice"],function(t){var n=r[t];tt.prototype[t]=function(){var t=this._wrapped;return null!=t&&(t=n.apply(t,arguments)),jn(this,t)}});var Rn=Ln({__proto__:null,VERSION:"1.11.0",restArguments:b,isObject:g,isNull:function(t){return null===t},isUndefined:function(t){return void 0===t},isBoolean:M,isElement:function(t){return!(!t||1!==t.nodeType)},isString:x,isNumber:P,isDate:_,isRegExp:S,isError:O,isSymbol:E,isMap:A,isWeakMap:j,isSet:L,isWeakSet:R,isArrayBuffer:I,isDataView:N,isArray:T,isFunction:k,isArguments:z,isFinite:function(t){return!E(t)&&h(t)&&!isNaN(parseFloat(t))},isNaN:V,isTypedArray:U,isEmpty:function(t){return null==t||(Q(t)&&(T(t)||x(t)||z(t))?0===t.length:0===K(t).length)},isMatch:$,isEqual:function(t,n){return nt(t,n)},keys:K,allKeys:et,values:rt,pairs:function(t){for(var n=K(t),e=n.length,r=Array(e),o=0;o<e;o++)r[o]=[n[o],t[n[o]]];return r},invert:ot,functions:it,methods:it,extend:st,extendOwn:ut,assign:ut,defaults:ct,create:function(t,n){var e=lt(t);return n&&ut(e,n),e},clone:ft,tap:function(t,n){return n(t),t},has:function(t,n){if(!T(n))return D(t,n);for(var e=n.length,r=0;r<e;r++){var o=n[r];if(null==t||!i.call(t,o))return!1;t=t[o]}return!!e},mapObject:function(t,n,e){n=gt(n,e);for(var r=K(t),o=r.length,i={},a=0;a<o;a++){var s=r[a];i[s]=n(t[s],s,t)}return i},identity:ht,constant:C,noop:function(){},property:vt,propertyOf:function(n){return null==n?function(){}:function(t){return T(t)?dt(n,t):n[t]}},matcher:pt,matches:pt,times:function(t,n,e){var r=Array(Math.max(0,t));n=mt(n,e,1);for(var o=0;o<t;o++)r[o]=n(o);return r},random:Mt,now:wt,escape:_t,unescape:St,templateSettings:Ot,template:function(i,t,n){!t&&n&&(t=n),t=ct({},t,tt.templateSettings);var e,r=RegExp([(t.escape||Et).source,(t.interpolate||Et).source,(t.evaluate||Et).source].join("|")+"|$","g"),a=0,s="__p+='";i.replace(r,function(t,n,e,r,o){return s+=i.slice(a,o).replace(jt,Lt),a=o+t.length,n?s+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":e?s+="'+\n((__t=("+e+"))==null?'':__t)+\n'":r&&(s+="';\n"+r+"\n__p+='"),t}),s+="';\n",t.variable||(s="with(obj||{}){\n"+s+"}\n"),s="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+s+"return __p;\n";try{e=new Function(t.variable||"obj","_",s)}catch(t){throw t.source=s,t}function o(t){return e.call(this,t,tt)}var u=t.variable||"obj";return o.source="function("+u+"){\n"+s+"}",o},result:function(t,n,e){T(n)||(n=[n]);var r=n.length;if(!r)return k(e)?e.call(t):e;for(var o=0;o<r;o++){var i=null==t?void 0:t[n[o]];void 0===i&&(i=e,o=r),t=k(i)?i.call(t):i}return t},uniqueId:function(t){var n=++Rt+"";return t?t+n:n},chain:function(t){var n=tt(t);return n._chain=!0,n},iteratee:bt,partial:Nt,bind:Tt,bindAll:qt,memoize:function(r,o){var i=function(t){var n=i.cache,e=""+(o?o.apply(this,arguments):t);return D(n,e)||(n[e]=r.apply(this,arguments)),n[e]};return i.cache={},i},delay:kt,defer:Dt,throttle:function(e,r,o){var i,a,s,u,c=0;function l(){c=!1===o.leading?0:wt(),i=null,u=e.apply(a,s),i||(a=s=null)}function t(){var t=wt();c||!1!==o.leading||(c=t);var n=r-(t-c);return a=this,s=arguments,n<=0||r<n?(i&&(clearTimeout(i),i=null),c=t,u=e.apply(a,s),i||(a=s=null)):i||!1===o.trailing||(i=setTimeout(l,n)),u}return o=o||{},t.cancel=function(){clearTimeout(i),c=0,i=a=s=null},t},debounce:function(e,r,o){function i(t,n){a=null,n&&(s=e.apply(t,n))}var a,s,t=b(function(t){if(a&&clearTimeout(a),o){var n=!a;a=setTimeout(i,r),n&&(s=e.apply(this,t))}else a=kt(i,r,this,t);return s});return t.cancel=function(){clearTimeout(a),a=null},t},wrap:function(t,n){return Nt(n,t)},negate:Yt,compose:function(){var e=arguments,r=e.length-1;return function(){for(var t=r,n=e[r].apply(this,arguments);t--;)n=e[t].call(this,n);return n}},after:function(t,n){return function(){if(--t<1)return n.apply(this,arguments)}},before:zt,once:Vt,findKey:Ct,findIndex:Wt,findLastIndex:Ht,sortedIndex:Jt,indexOf:Ut,lastIndexOf:Zt,find:Qt,detect:Qt,findWhere:function(t,n){return Qt(t,pt(n))},each:Xt,forEach:Xt,map:Kt,collect:Kt,reduce:tn,foldl:tn,inject:tn,reduceRight:nn,foldr:nn,filter:en,select:en,reject:function(t,n,e){return en(t,Yt(gt(n)),e)},every:rn,all:rn,some:on,any:on,contains:an,includes:an,include:an,invoke:sn,pluck:un,where:function(t,n){return en(t,pt(n))},max:cn,min:function(t,r,n){var e,o,i=1/0,a=1/0;if(null==r||"number"==typeof r&&"object"!=typeof t[0]&&null!=t)for(var s=0,u=(t=Q(t)?t:rt(t)).length;s<u;s++)null!=(e=t[s])&&e<i&&(i=e);else r=gt(r,n),Xt(t,function(t,n,e){((o=r(t,n,e))<a||o===1/0&&i===1/0)&&(i=t,a=o)});return i},shuffle:function(t){return ln(t,1/0)},sample:ln,sortBy:function(t,r,n){var o=0;return r=gt(r,n),un(Kt(t,function(t,n,e){return{value:t,index:o++,criteria:r(t,n,e)}}).sort(function(t,n){var e=t.criteria,r=n.criteria;if(e!==r){if(r<e||void 0===e)return 1;if(e<r||void 0===r)return-1}return t.index-n.index}),"value")},groupBy:hn,indexBy:pn,countBy:dn,partition:vn,toArray:function(t){return t?T(t)?u.call(t):x(t)?t.match(mn):Q(t)?Kt(t,ht):rt(t):[]},size:function(t){return null==t?0:Q(t)?t.length:K(t).length},pick:bn,omit:gn,first:wn,head:wn,take:wn,initial:Mn,last:function(t,n,e){return null==t||t.length<1?null==n||e?void 0:[]:null==n||e?t[t.length-1]:xn(t,Math.max(0,t.length-n))},rest:xn,tail:xn,drop:xn,compact:function(t){return en(t,Boolean)},flatten:function(t,n){return Ft(t,n,!1)},without:_n,uniq:Sn,unique:Sn,union:On,intersection:function(t){for(var n=[],e=arguments.length,r=0,o=Z(t);r<o;r++){var i=t[r];if(!an(n,i)){var a;for(a=1;a<e&&an(arguments[a],i);a++);a===e&&n.push(i)}}return n},difference:Pn,unzip:En,transpose:En,zip:An,object:function(t,n){for(var e={},r=0,o=Z(t);r<o;r++)n?e[t[r]]=n[r]:e[t[r][0]]=t[r][1];return e},range:function(t,n,e){null==n&&(n=t||0,t=0),e=e||(n<t?-1:1);for(var r=Math.max(Math.ceil((n-t)/e),0),o=Array(r),i=0;i<r;i++,t+=e)o[i]=t;return o},chunk:function(t,n){if(null==n||n<1)return[];for(var e=[],r=0,o=t.length;r<o;)e.push(u.call(t,r,r+=n));return e},mixin:Ln,default:tt});return Rn._=Rn},"object"==typeof i&&void 0!==o?o.exports=n():"function"==typeof define&&define.amd?define("underscore",n):(t=t||self,e=t._,(r=t._=n()).noConflict=function(){return t._=e,r})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],35:[function(t,n,e){"use strict";n.exports=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}},{}],36:[function(t,n,e){"undefined"!=typeof window&&"function"!=typeof window.requestAnimationFrame&&(window.requestAnimationFrame=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){setTimeout(t,1e3/60)}),Leap=t("../lib/index")},{"../lib/index":12}]},{},[36]);